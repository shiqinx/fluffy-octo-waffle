# æ ¡å›­æ´»åŠ¨å¹³å°å‰åç«¯è¿æ¥æŒ‡å—

## ğŸš€ å®Œæ•´è¿æ¥æ­¥éª¤

### ç¬¬ä¸€æ­¥ï¼šç¯å¢ƒå‡†å¤‡

#### 1.1 æ£€æŸ¥åç«¯æœåŠ¡çŠ¶æ€
```bash
# ç¡®ä¿åç«¯æœåŠ¡æ­£åœ¨è¿è¡Œ
# é»˜è®¤åç«¯ç«¯å£ï¼š8080
# è®¿é—®ï¼šhttp://localhost:8080
```

#### 1.2 æ£€æŸ¥å‰ç«¯ç¯å¢ƒé…ç½®
æŸ¥çœ‹ç¯å¢ƒé…ç½®æ–‡ä»¶ï¼š
- `src/.env.development` - å¼€å‘ç¯å¢ƒé…ç½®
- `src/.env.production` - ç”Ÿäº§ç¯å¢ƒé…ç½®
- `src/.env.test` - æµ‹è¯•ç¯å¢ƒé…ç½®

### ç¬¬äºŒæ­¥ï¼šAPIåŸºç¡€é…ç½®

#### 2.1 æ£€æŸ¥APIåŸºç¡€é…ç½®
æŸ¥çœ‹ `src/utils/request.js` æ–‡ä»¶ï¼Œç¡®ä¿ï¼š
```javascript
// APIåŸºç¡€URLé…ç½®
const baseURL = import.meta.env.VITE_API_BASE_URL || 'http://localhost:8080/api'

// è¯·æ±‚æ‹¦æˆªå™¨é…ç½®
request.interceptors.request.use(config => {
  // æ·»åŠ tokenç­‰è®¤è¯ä¿¡æ¯
  const token = localStorage.getItem('token')
  if (token) {
    config.headers.Authorization = `Bearer ${token}`
  }
  return config
})

// å“åº”æ‹¦æˆªå™¨é…ç½®
request.interceptors.response.use(
  response => response.data,
  error => {
    // ç»Ÿä¸€é”™è¯¯å¤„ç†
    console.error('APIè¯·æ±‚å¤±è´¥:', error)
    return Promise.reject(error)
  }
)
```

#### 2.2 ç¯å¢ƒå˜é‡é…ç½®
ç¡®ä¿ `src/.env.development` åŒ…å«ï¼š
```env
VITE_API_BASE_URL=http://localhost:8080/api
VITE_APP_TITLE=æ ¡å›­æ´»åŠ¨å¹³å°
```

### ç¬¬ä¸‰æ­¥ï¼šè®¤è¯æ¨¡å—è¿æ¥

#### 3.1 ç”¨æˆ·ç™»å½•è¿æ¥
```javascript
// src/api/auth.js
export function userLogin(data) {
  return request({
    url: '/user/login',
    method: 'post',
    data
  })
}
```

**è¿æ¥æµ‹è¯•æ­¥éª¤ï¼š**
1. å¯åŠ¨å‰ç«¯å¼€å‘æœåŠ¡å™¨ï¼š`npm run dev`
2. è®¿é—®ç™»å½•é¡µé¢ï¼š`http://localhost:3002/auth/login`
3. è¾“å…¥æµ‹è¯•è´¦å·å¯†ç 
4. æ£€æŸ¥æµè§ˆå™¨Networké¢æ¿ä¸­çš„APIè¯·æ±‚

#### 3.2 ç”¨æˆ·æ³¨å†Œè¿æ¥
```javascript
// src/api/auth.js
export function userRegister(data) {
  return request({
    url: '/user/register',
    method: 'post',
    data
  })
}
```

### ç¬¬å››æ­¥ï¼šæ ¸å¿ƒåŠŸèƒ½æ¨¡å—è¿æ¥

#### 4.1 æ´»åŠ¨æ¨¡å—è¿æ¥
```javascript
// src/api/activity.js
export function getActivityList(params) {
  return request({
    url: '/activity/list',
    method: 'get',
    params
  })
}

export function createActivity(data) {
  return request({
    url: '/activity/create',
    method: 'post',
    data
  })
}
```

#### 4.2 å›¢é˜Ÿæ¨¡å—è¿æ¥
```javascript
// src/api/team.js
export function getTeamList(params) {
  return request({
    url: '/team/list',
    method: 'get',
    params
  })
}

export function createTeam(data) {
  return request({
    url: '/team/create',
    method: 'post',
    data
  })
}
```

#### 4.3 ç”¨æˆ·æ¨¡å—è¿æ¥
```javascript
// src/api/user.js
export function getUserInfo() {
  return request({
    url: '/user/info',
    method: 'get'
  })
}

export function updateUserInfo(data) {
  return request({
    url: '/user/update',
    method: 'put',
    data
  })
}
```

### ç¬¬äº”æ­¥ï¼šè¿æ¥æµ‹è¯•ä¸éªŒè¯

#### 5.1 ä½¿ç”¨æµ‹è¯•é¡µé¢éªŒè¯
é¡¹ç›®æä¾›äº†å¤šä¸ªæµ‹è¯•é¡µé¢ï¼š
- `public/test-auth-api.html` - è®¤è¯æ¥å£æµ‹è¯•
- `public/test-activity-api.html` - æ´»åŠ¨æ¥å£æµ‹è¯•
- `public/test-teams-api.html` - å›¢é˜Ÿæ¥å£æµ‹è¯•
- `public/test-backend-connection.html` - åç«¯è¿æ¥æµ‹è¯•

#### 5.2 APIè¿æ¥æµ‹è¯•æ­¥éª¤
1. ç¡®ä¿åç«¯æœåŠ¡è¿è¡Œåœ¨ `http://localhost:8080`
2. å¯åŠ¨å‰ç«¯ï¼š`npm run dev`
3. è®¿é—®æµ‹è¯•é¡µé¢ï¼š`http://localhost:3002/test-backend-connection.html`
4. ç‚¹å‡»æµ‹è¯•æŒ‰é’®ï¼Œæ£€æŸ¥APIå“åº”

### ç¬¬å…­æ­¥ï¼šå¸¸è§é—®é¢˜è§£å†³

#### 6.1 CORSè·¨åŸŸé—®é¢˜
å¦‚æœé‡åˆ°è·¨åŸŸé”™è¯¯ï¼Œæ£€æŸ¥åç«¯CORSé…ç½®ï¼š
```java
// åç«¯éœ€è¦é…ç½®CORS
@CrossOrigin(origins = "http://localhost:3002")
```

#### 6.2 è¿æ¥è¶…æ—¶é—®é¢˜
æ£€æŸ¥ç½‘ç»œé…ç½®å’Œé˜²ç«å¢™è®¾ç½®ã€‚

#### 6.3 è®¤è¯å¤±è´¥é—®é¢˜
ç¡®ä¿tokenæ­£ç¡®ä¼ é€’ï¼š
```javascript
// æ£€æŸ¥localStorageä¸­çš„token
console.log(localStorage.getItem('token'))
```

## ğŸ”§ å¿«é€Ÿè¿æ¥æ£€æŸ¥æ¸…å•

### âœ… è¿æ¥å‰æ£€æŸ¥
- [ ] åç«¯æœåŠ¡æ˜¯å¦å¯åŠ¨ï¼ˆç«¯å£8080ï¼‰
- [ ] å‰ç«¯å¼€å‘æœåŠ¡å™¨æ˜¯å¦å¯åŠ¨ï¼ˆç«¯å£3002ï¼‰
- [ ] ç¯å¢ƒå˜é‡é…ç½®æ˜¯å¦æ­£ç¡®
- [ ] APIåŸºç¡€URLæ˜¯å¦é…ç½®æ­£ç¡®

### âœ… è¿æ¥ä¸­æ£€æŸ¥
- [ ] ç™»å½•æ¥å£æ˜¯å¦æ­£å¸¸è¿”å›token
- [ ] tokenæ˜¯å¦æ­£ç¡®å­˜å‚¨åœ¨localStorage
- [ ] åç»­è¯·æ±‚æ˜¯å¦æºå¸¦Authorizationå¤´
- [ ] APIå“åº”æ•°æ®æ ¼å¼æ˜¯å¦æ­£ç¡®

### âœ… è¿æ¥åæ£€æŸ¥
- [ ] é¡µé¢æ•°æ®æ˜¯å¦æ­£å¸¸æ˜¾ç¤º
- [ ] ç”¨æˆ·æ“ä½œæ˜¯å¦æ­£å¸¸å“åº”
- [ ] é”™è¯¯æç¤ºæ˜¯å¦æ­£å¸¸æ˜¾ç¤º
- [ ] é¡µé¢è·³è½¬æ˜¯å¦æ­£å¸¸

## ğŸ“‹ å®Œæ•´è¿æ¥æµç¨‹å›¾

```
1. å¯åŠ¨åç«¯æœåŠ¡ (localhost:8080)
         â†“
2. å¯åŠ¨å‰ç«¯æœåŠ¡ (localhost:3002)
         â†“
3. ç”¨æˆ·è®¿é—®ç™»å½•é¡µé¢
         â†“
4. è°ƒç”¨ç™»å½•API (/api/user/login)
         â†“
5. åç«¯éªŒè¯å¹¶è¿”å›token
         â†“
6. å‰ç«¯å­˜å‚¨tokenåˆ°localStorage
         â†“
7. åç»­è¯·æ±‚æºå¸¦Authorizationå¤´
         â†“
8. æ­£å¸¸ä½¿ç”¨æ‰€æœ‰åŠŸèƒ½æ¨¡å—
```

## ğŸš¨ å¸¸è§é”™è¯¯åŠè§£å†³æ–¹æ¡ˆ

### é”™è¯¯1ï¼šNetwork Error
**åŸå› **ï¼šåç«¯æœåŠ¡æœªå¯åŠ¨æˆ–ç«¯å£é”™è¯¯
**è§£å†³**ï¼šæ£€æŸ¥åç«¯æœåŠ¡çŠ¶æ€ï¼Œç¡®è®¤ç«¯å£ä¸º8080

### é”™è¯¯2ï¼š401 Unauthorized
**åŸå› **ï¼štokenè¿‡æœŸæˆ–æœªä¼ é€’
**è§£å†³**ï¼šé‡æ–°ç™»å½•è·å–æ–°token

### é”™è¯¯3ï¼š404 Not Found
**åŸå› **ï¼šAPIè·¯å¾„é”™è¯¯
**è§£å†³**ï¼šæ£€æŸ¥APIè·¯å¾„é…ç½®

### é”™è¯¯4ï¼š500 Internal Server Error
**åŸå› **ï¼šåç«¯ä»£ç é”™è¯¯
**è§£å†³**ï¼šæŸ¥çœ‹åç«¯æ—¥å¿—ï¼Œä¿®å¤åç«¯ä»£ç 

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœè¿æ¥è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼š
1. æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°é”™è¯¯ä¿¡æ¯
2. æŸ¥çœ‹Networké¢æ¿APIè¯·æ±‚è¯¦æƒ…
3. å‚è€ƒé¡¹ç›®ä¸­çš„æµ‹è¯•é¡µé¢
4. æŸ¥çœ‹APIåˆè§„æ€§æŠ¥å‘Šï¼š`API_COMPLIANCE_REPORT.md`

---

**æ³¨æ„äº‹é¡¹ï¼š**
- ç¡®ä¿å‰åç«¯ç‰ˆæœ¬åŒ¹é…
- ä¿æŒç½‘ç»œè¿æ¥ç¨³å®š
- å®šæœŸæ›´æ–°APIæ–‡æ¡£
- åšå¥½é”™è¯¯æ—¥å¿—è®°å½•