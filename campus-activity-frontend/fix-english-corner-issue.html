<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ´»åŠ¨æ•°æ®ä¿®å¤ - è§£å†³è‹±è¯­è§’é—®é¢˜</title>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            padding: 20px; 
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .container { 
            max-width: 800px; 
            margin: 0 auto; 
            background: white; 
            padding: 30px; 
            border-radius: 12px; 
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        .activity { 
            border: 1px solid #ddd; 
            padding: 15px; 
            margin: 10px 0; 
            border-radius: 8px;
            transition: transform 0.2s;
        }
        .activity:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        .activity h3 { color: #333; margin: 0 0 10px 0; }
        .activity p { color: #666; margin: 5px 0; }
        .activity .tags { display: flex; gap: 5px; flex-wrap: wrap; margin-top: 10px; }
        .tag { background: #e3f2fd; color: #1976d2; padding: 2px 8px; border-radius: 12px; font-size: 12px; }
        .reset-btn { 
            background: linear-gradient(45deg, #4CAF50, #45a049); 
            color: white; 
            padding: 15px 30px; 
            border: none; 
            border-radius: 8px; 
            cursor: pointer; 
            margin: 20px 0;
            font-size: 16px;
            font-weight: bold;
            box-shadow: 0 4px 15px rgba(76, 175, 80, 0.3);
            transition: all 0.3s;
        }
        .reset-btn:hover { 
            background: linear-gradient(45deg, #45a049, #4CAF50);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(76, 175, 80, 0.4);
        }
        .status { 
            padding: 10px; 
            margin: 10px 0; 
            border-radius: 5px; 
            font-weight: bold;
        }
        .success { background: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .error { background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
        .warning { background: #fff3cd; color: #856404; border: 1px solid #ffeaa7; }
        h1 { color: #333; text-align: center; margin-bottom: 30px; }
        h2 { color: #555; border-bottom: 2px solid #eee; padding-bottom: 10px; }
        .debug-info { 
            background: #f8f9fa; 
            border: 1px solid #dee2e6; 
            padding: 15px; 
            border-radius: 5px; 
            font-family: monospace; 
            white-space: pre-wrap;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ”§ æ´»åŠ¨æ•°æ®ä¿®å¤å·¥å…·</h1>
        <p style="text-align: center; color: #666; font-size: 18px;">è§£å†³"ç‚¹è¿›å»å…¨æ˜¯è‹±è¯­è§’"çš„é—®é¢˜</p>
        
        <div style="text-align: center;">
            <button class="reset-btn" onclick="resetActivitiesData()">ğŸ”„ é‡ç½®æ´»åŠ¨æ•°æ®</button>
        </div>
        
        <div id="status"></div>
        
        <h2>ğŸ“‹ æ­£ç¡®çš„æ´»åŠ¨æ•°æ® (å…±6ä¸ª)</h2>
        <div id="activities-list"></div>
        
        <h2>ğŸ” è°ƒè¯•ä¿¡æ¯</h2>
        <div id="debug-info" class="debug-info">ç‚¹å‡»"é‡ç½®æ´»åŠ¨æ•°æ®"æŒ‰é’®æŸ¥çœ‹è°ƒè¯•ä¿¡æ¯...</div>
    </div>

    <script>
        // æ­£ç¡®çš„æ´»åŠ¨æ•°æ®
        const correctActivities = [
            {
                id: 1,
                title: 'ä¸­åŒ»å…»ç”Ÿè®²åº§',
                type: 'å­¦æœ¯è®²åº§',
                category: 'study',
                description: 'é‚€è¯·è‘—åä¸­åŒ»ä¸“å®¶è®²è§£ä¼ ç»Ÿå…»ç”ŸçŸ¥è¯†ï¼ŒåŒ…æ‹¬å››å­£å…»ç”Ÿã€é£Ÿç–—å…»ç”Ÿã€è¿åŠ¨å…»ç”Ÿç­‰å†…å®¹ã€‚ç°åœºè¿˜æœ‰å…è´¹ä¸­åŒ»ä½“è´¨æ£€æµ‹æœåŠ¡ã€‚',
                locationName: 'å­¦æœ¯æŠ¥å‘Šå…',
                location: {
                    name: 'å­¦æœ¯æŠ¥å‘Šå…',
                    address: 'å¹¿ä¸œè¯ç§‘å¤§å­¦äº‘æµ®æ ¡åŒºå­¦æœ¯æŠ¥å‘Šå…'
                },
                startTime: '2024-12-20T14:00:00',
                endTime: '2024-12-20T16:30:00',
                registrationDeadline: '2024-12-19T23:59:59',
                currentParticipants: 156,
                maxParticipants: 200,
                organizer: {
                    id: 1,
                    name: 'ä¸­åŒ»å­¦é™¢',
                    avatar: '',
                    role: 'ç»„ç»‡è€…',
                    creditScore: 98
                },
                status: 'open',
                isEnrolled: false,
                distance: 0.3,
                tags: ['å¥åº·', 'å…»ç”Ÿ', 'ä¸­åŒ»', 'è®²åº§']
            },
            {
                id: 2,
                title: 'æ‘„å½±ä½œå“å±•è§ˆ',
                type: 'æ–‡åŒ–è‰ºæœ¯',
                category: 'culture',
                description: 'å±•ç¤ºæˆ‘æ ¡æ‘„å½±çˆ±å¥½è€…çš„ä¼˜ç§€ä½œå“ï¼ŒåŒ…æ‹¬æ ¡å›­é£å…‰ã€äººç‰©è‚–åƒã€çºªå®æ‘„å½±ç­‰å¤šä¸ªç±»åˆ«ã€‚å¼€å¹•å¼å°†æœ‰ä¸“ä¸šæ‘„å½±å¸ˆç°åœºåˆ†äº«æ‹æ‘„æŠ€å·§ã€‚',
                locationName: 'è‰ºæœ¯å±•è§ˆä¸­å¿ƒ',
                location: {
                    name: 'è‰ºæœ¯å±•è§ˆä¸­å¿ƒ',
                    address: 'å¹¿ä¸œè¯ç§‘å¤§å­¦äº‘æµ®æ ¡åŒºè‰ºæœ¯å±•è§ˆä¸­å¿ƒ'
                },
                startTime: '2024-12-21T10:00:00',
                endTime: '2024-12-25T18:00:00',
                registrationDeadline: '2024-12-20T23:59:59',
                currentParticipants: 234,
                maxParticipants: 500,
                organizer: {
                    id: 2,
                    name: 'æ‘„å½±åä¼š',
                    avatar: '',
                    role: 'ç»„ç»‡è€…',
                    creditScore: 95
                },
                status: 'open',
                isEnrolled: false,
                distance: 0.5,
                tags: ['æ‘„å½±', 'è‰ºæœ¯', 'å±•è§ˆ', 'æ–‡åŒ–']
            },
            {
                id: 3,
                title: 'ç¼–ç¨‹é©¬æ‹‰æ¾å¤§èµ›',
                type: 'ç§‘æŠ€åˆ›æ–°',
                category: 'tech',
                description: '48å°æ—¶ç¼–ç¨‹æŒ‘æˆ˜èµ›ï¼Œä¸»é¢˜ä¸º"æ™ºæ…§æ ¡å›­"ã€‚å‚èµ›è€…éœ€è¦åœ¨è§„å®šæ—¶é—´å†…å®Œæˆåˆ›æ–°é¡¹ç›®å¼€å‘ï¼Œä¼˜èƒœå›¢é˜Ÿå°†è·å¾—ä¸°åšå¥–å“å’Œå®ä¹ æœºä¼šã€‚',
                locationName: 'åˆ›æ–°å®éªŒå®¤',
                location: {
                    name: 'åˆ›æ–°å®éªŒå®¤',
                    address: 'å¹¿ä¸œè¯ç§‘å¤§å­¦äº‘æµ®æ ¡åŒºåˆ›æ–°å®éªŒå®¤'
                },
                startTime: '2024-12-22T09:00:00',
                endTime: '2024-12-24T09:00:00',
                registrationDeadline: '2024-12-21T23:59:59',
                currentParticipants: 87,
                maxParticipants: 100,
                organizer: {
                    id: 3,
                    name: 'è®¡ç®—æœºå­¦é™¢',
                    avatar: '',
                    role: 'ç»„ç»‡è€…',
                    creditScore: 96
                },
                status: 'open',
                isEnrolled: false,
                distance: 1.2,
                tags: ['ç¼–ç¨‹', 'åˆ›æ–°', 'æ¯”èµ›', 'æŠ€æœ¯']
            },
            {
                id: 4,
                title: 'ç¯®çƒå‹è°Šèµ›',
                type: 'ä½“è‚²ç«æŠ€',
                category: 'sports',
                description: 'é™¢ç³»é—´ç¯®çƒå‹è°Šèµ›ï¼Œä¿ƒè¿›å„é™¢ç³»äº¤æµã€‚æ¯”èµ›é‡‡ç”¨å›½é™…ç¯®è”è§„åˆ™ï¼Œè®¾æœ‰MVPå¥–é¡¹å’Œæœ€ä½³å›¢é˜Ÿå¥–ã€‚',
                locationName: 'ä½“è‚²é¦†',
                location: {
                    name: 'ä½“è‚²é¦†',
                    address: 'å¹¿ä¸œè¯ç§‘å¤§å­¦äº‘æµ®æ ¡åŒºä½“è‚²é¦†'
                },
                startTime: '2024-12-23T16:00:00',
                endTime: '2024-12-23T18:00:00',
                registrationDeadline: '2024-12-22T23:59:59',
                currentParticipants: 178,
                maxParticipants: 200,
                organizer: {
                    id: 4,
                    name: 'ä½“è‚²éƒ¨',
                    avatar: '',
                    role: 'ç»„ç»‡è€…',
                    creditScore: 94
                },
                status: 'open',
                isEnrolled: false,
                distance: 0.8,
                tags: ['ç¯®çƒ', 'ä½“è‚²', 'æ¯”èµ›', 'å‹è°Šèµ›']
            },
            {
                id: 5,
                title: 'æ ¡å›­éŸ³ä¹èŠ‚',
                type: 'æ–‡è‰ºæ¼”å‡º',
                category: 'culture',
                description: 'å¹´åº¦æ ¡å›­éŸ³ä¹ç››å…¸ï¼Œé‚€è¯·æ ¡å†…çŸ¥åä¹é˜Ÿå’Œæ ¡å¤–ä¸“ä¸šéŸ³ä¹äººåŒå°æ¼”å‡ºã€‚æ¶µç›–æ‘‡æ»šã€æ°‘è°£ã€æµè¡Œç­‰å¤šç§éŸ³ä¹é£æ ¼ã€‚',
                locationName: 'å¤§å­¦ç”Ÿæ´»åŠ¨ä¸­å¿ƒ',
                location: {
                    name: 'å¤§å­¦ç”Ÿæ´»åŠ¨ä¸­å¿ƒ',
                    address: 'å¹¿ä¸œè¯ç§‘å¤§å­¦äº‘æµ®æ ¡åŒºå¤§å­¦ç”Ÿæ´»åŠ¨ä¸­å¿ƒ'
                },
                startTime: '2024-12-24T19:00:00',
                endTime: '2024-12-24T22:30:00',
                registrationDeadline: '2024-12-23T23:59:59',
                currentParticipants: 856,
                maxParticipants: 1000,
                organizer: {
                    id: 5,
                    name: 'å­¦ç”Ÿä¼šæ–‡è‰ºéƒ¨',
                    avatar: '',
                    role: 'ç»„ç»‡è€…',
                    creditScore: 92
                },
                status: 'open',
                isEnrolled: false,
                distance: 0.6,
                tags: ['éŸ³ä¹', 'æ¼”å‡º', 'æ–‡è‰º', 'éŸ³ä¹èŠ‚']
            },
            {
                id: 6,
                title: 'å›¾ä¹¦é¦†å­¦ä¹ å°ç»„',
                type: 'å­¦ä¹ äº¤æµ',
                category: 'study',
                description: 'ä¸ºæœŸä¸€å‘¨çš„é›†ä¸­å­¦ä¹ æ´»åŠ¨ï¼Œæä¾›å®‰é™çš„å­¦ä¹ ç¯å¢ƒå’Œä¸“ä¸šçš„å­¦ä¹ æŒ‡å¯¼ã€‚æ¯æ—¥æœ‰ä¸åŒå­¦ç§‘çš„è€å¸ˆç°åœºç­”ç–‘ã€‚',
                locationName: 'å›¾ä¹¦é¦†ç ”è®¨å®¤',
                location: {
                    name: 'å›¾ä¹¦é¦†ç ”è®¨å®¤',
                    address: 'å¹¿ä¸œè¯ç§‘å¤§å­¦äº‘æµ®æ ¡åŒºå›¾ä¹¦é¦†ç ”è®¨å®¤'
                },
                startTime: '2024-12-19T09:00:00',
                endTime: '2024-12-25T21:00:00',
                registrationDeadline: '2024-12-18T23:59:59',
                currentParticipants: 42,
                maxParticipants: 50,
                organizer: {
                    id: 6,
                    name: 'å›¾ä¹¦é¦†',
                    avatar: '',
                    role: 'ç»„ç»‡è€…',
                    creditScore: 99
                },
                status: 'open',
                isEnrolled: false,
                distance: 0.4,
                tags: ['å­¦ä¹ ', 'å›¾ä¹¦é¦†', 'ç ”è®¨', 'äº¤æµ']
            }
        ];

        function showStatus(message, type = 'success') {
            const statusDiv = document.getElementById('status');
            statusDiv.innerHTML = `<div class="status ${type}">${message}</div>`;
        }

        function updateDebugInfo(info) {
            document.getElementById('debug-info').textContent = info;
        }

        function displayActivities(activities) {
            const container = document.getElementById('activities-list');
            container.innerHTML = activities.map(activity => `
                <div class="activity">
                    <h3>${activity.id}. ${activity.title}</h3>
                    <p><strong>ç±»å‹:</strong> ${activity.type}</p>
                    <p><strong>åœ°ç‚¹:</strong> ${activity.locationName}</p>
                    <p><strong>æ—¶é—´:</strong> ${new Date(activity.startTime).toLocaleString('zh-CN')}</p>
                    <p><strong>æè¿°:</strong> ${activity.description}</p>
                    <div class="tags">
                        ${activity.tags.map(tag => `<span class="tag">${tag}</span>`).join('')}
                    </div>
                </div>
            `).join('');
        }

        function resetActivitiesData() {
            try {
                showStatus('ğŸ”„ æ­£åœ¨é‡ç½®æ´»åŠ¨æ•°æ®...', 'warning');
                
                // æ¸…ç†æ—§æ•°æ®
                const keysToRemove = ['campus_activities', 'activities', 'user_activities', 'enrolled_activities'];
                keysToRemove.forEach(key => localStorage.removeItem(key));
                
                // è®¾ç½®æ­£ç¡®çš„æ´»åŠ¨æ•°æ®
                localStorage.setItem('campus_activities', JSON.stringify(correctActivities));
                
                // æ˜¾ç¤ºæˆåŠŸä¿¡æ¯
                showStatus('âœ… æ´»åŠ¨æ•°æ®é‡ç½®å®Œæˆï¼å…±' + correctActivities.length + 'ä¸ªæ´»åŠ¨', 'success');
                
                // æ›´æ–°è°ƒè¯•ä¿¡æ¯
                let debugInfo = 'ğŸ“Š é‡ç½®å®Œæˆï¼\n';
                debugInfo += `æ´»åŠ¨æ•°é‡: ${correctActivities.length}\n`;
                debugInfo += 'æ´»åŠ¨åˆ—è¡¨:\n';
                correctActivities.forEach((activity, index) => {
                    debugInfo += `  ${index + 1}. ${activity.title} - ${activity.type}\n`;
                });
                debugInfo += '\nğŸ”„ è¯·åˆ·æ–°æ´»åŠ¨åˆ—è¡¨é¡µé¢æŸ¥çœ‹ä¿®å¤æ•ˆæœ';
                updateDebugInfo(debugInfo);
                
                console.log('âœ… æ´»åŠ¨æ•°æ®é‡ç½®å®Œæˆ');
                console.log('ğŸ“Š å½“å‰æ´»åŠ¨æ•°é‡:', correctActivities.length);
                console.log('ğŸ“‹ æ´»åŠ¨åˆ—è¡¨:');
                correctActivities.forEach((activity, index) => {
                    console.log(`  ${index + 1}. ${activity.title} - ${activity.type}`);
                });
                
            } catch (error) {
                showStatus('âŒ é‡ç½®å¤±è´¥: ' + error.message, 'error');
                console.error('é‡ç½®æ´»åŠ¨æ•°æ®å¤±è´¥:', error);
            }
        }

        // é¡µé¢åŠ è½½æ—¶æ˜¾ç¤ºå½“å‰localStorageçŠ¶æ€
        window.onload = function() {
            // æ˜¾ç¤ºæ­£ç¡®çš„æ´»åŠ¨æ•°æ®
            displayActivities(correctActivities);
            
            // æ£€æŸ¥å½“å‰localStorageçŠ¶æ€
            const stored = localStorage.getItem('campus_activities');
            let debugInfo = 'ğŸ“± å½“å‰localStorageçŠ¶æ€:\n';
            
            if (stored) {
                try {
                    const activities = JSON.parse(stored);
                    debugInfo += `æ´»åŠ¨æ•°é‡: ${activities.length}\n`;
                    debugInfo += 'æ´»åŠ¨åˆ—è¡¨:\n';
                    activities.forEach((activity, index) => {
                        debugInfo += `  ${index + 1}. ${activity.title || 'æœªå‘½åæ´»åŠ¨'}\n`;
                    });
                    
                    // æ£€æŸ¥æ˜¯å¦æœ‰è‹±è¯­è§’æ´»åŠ¨
                    const hasEnglishCorner = activities.some(a => 
                        a.title && a.title.includes('è‹±è¯­è§’')
                    );
                    if (hasEnglishCorner) {
                        debugInfo += '\nâš ï¸ æ£€æµ‹åˆ°è‹±è¯­è§’æ´»åŠ¨ï¼Œéœ€è¦é‡ç½®æ•°æ®ï¼';
                        showStatus('âš ï¸ æ£€æµ‹åˆ°è‹±è¯­è§’æ´»åŠ¨ï¼Œå»ºè®®é‡ç½®æ•°æ®', 'warning');
                    } else {
                        debugInfo += '\nâœ… æ²¡æœ‰æ£€æµ‹åˆ°è‹±è¯­è§’æ´»åŠ¨';
                    }
                } catch (e) {
                    debugInfo += 'âŒ æ•°æ®è§£æå¤±è´¥: ' + e.message;
                }
            } else {
                debugInfo += 'ğŸ“± localStorageä¸­æ²¡æœ‰æ´»åŠ¨æ•°æ®';
                showStatus('ğŸ“± localStorageä¸­æ²¡æœ‰æ´»åŠ¨æ•°æ®ï¼Œå¯ä»¥åˆå§‹åŒ–', 'warning');
            }
            
            updateDebugInfo(debugInfo);
        };
    </script>
</body>
</html>