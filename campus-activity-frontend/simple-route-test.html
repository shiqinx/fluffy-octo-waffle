<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç®€åŒ–è·¯ç”±æµ‹è¯•</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .test-container {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .test-button {
            display: inline-block;
            margin: 5px;
            padding: 10px 15px;
            background: #007bff;
            color: white;
            text-decoration: none;
            border-radius: 4px;
            border: none;
            cursor: pointer;
        }
        .test-button:hover {
            background: #0056b3;
        }
        .test-button.success {
            background: #28a745;
        }
        .test-button.warning {
            background: #ffc107;
            color: #000;
        }
        .iframe-container {
            width: 100%;
            height: 600px;
            border: 2px solid #ddd;
            border-radius: 8px;
            overflow: hidden;
            position: relative;
        }
        iframe {
            width: 100%;
            height: 100%;
            border: none;
        }
        .status {
            padding: 10px;
            margin: 10px 0;
            border-radius: 4px;
            font-weight: bold;
        }
        .status.success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .status.error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        .status.info {
            background: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }
        .mobile-frame {
            width: 375px;
            height: 667px;
            margin: 0 auto;
            border: 2px solid #333;
            border-radius: 20px;
            overflow: hidden;
            position: relative;
            background: white;
        }
        .test-log {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 4px;
            padding: 10px;
            margin: 10px 0;
            font-family: monospace;
            font-size: 12px;
            max-height: 200px;
            overflow-y: auto;
        }
        .log-entry {
            margin: 2px 0;
            padding: 2px 5px;
            border-radius: 2px;
        }
        .log-entry.success {
            background: #d4edda;
            color: #155724;
        }
        .log-entry.error {
            background: #f8d7da;
            color: #721c24;
        }
        .log-entry.info {
            background: #d1ecf1;
            color: #0c5460;
        }
    </style>
</head>
<body>
    <h1>ğŸš€ ç®€åŒ–è·¯ç”±å¯¼èˆªæµ‹è¯•</h1>
    
    <div class="test-container">
        <h2>ğŸ“± ç§»åŠ¨ç«¯æ¨¡æ‹Ÿæµ‹è¯•</h2>
        <p>æµ‹è¯•ç®€åŒ–åçš„è·¯ç”±å®ˆå«æ˜¯å¦èƒ½æ­£å¸¸å“åº”å¯¼èˆªè¯·æ±‚</p>
        
        <div class="mobile-frame">
            <iframe id="app-frame" src="/"></iframe>
        </div>
        
        <div style="margin-top: 20px;">
            <button class="test-button" onclick="testNavigation('/home')">æµ‹è¯•é¦–é¡µ</button>
            <button class="test-button" onclick="testNavigation('/activities-teams')">æµ‹è¯•æ´»åŠ¨/å›¢é˜Ÿ</button>
            <button class="test-button" onclick="testNavigation('/messages')">æµ‹è¯•æ¶ˆæ¯</button>
            <button class="test-button" onclick="testNavigation('/profile')">æµ‹è¯•ä¸ªäººä¸­å¿ƒ</button>
            <button class="test-button warning" onclick="testNavigation('/login')">æµ‹è¯•ç™»å½•é¡µ</button>
        </div>
    </div>

    <div class="test-container">
        <h2>ğŸ”— ç›´æ¥é“¾æ¥æµ‹è¯•</h2>
        <p>ç›´æ¥è®¿é—®å„ä¸ªè·¯ç”±ï¼Œæµ‹è¯•è·¯ç”±å®ˆå«çš„å“åº”</p>
        
        <div style="margin-bottom: 15px;">
            <a href="/#/home" target="_blank" class="test-button">é¦–é¡µ</a>
            <a href="/#/activities-teams" target="_blank" class="test-button">æ´»åŠ¨/å›¢é˜Ÿ</a>
            <a href="/#/messages" target="_blank" class="test-button">æ¶ˆæ¯</a>
            <a href="/#/profile" target="_blank" class="test-button">ä¸ªäººä¸­å¿ƒ</a>
            <a href="/#/login" target="_blank" class="test-button warning">ç™»å½•é¡µ</a>
        </div>
    </div>

    <div class="test-container">
        <h2>ğŸ“Š æµ‹è¯•ç»“æœ</h2>
        <div id="test-status" class="status info">ç­‰å¾…æµ‹è¯•...</div>
        
        <h3>ğŸ“ æµ‹è¯•æ—¥å¿—</h3>
        <div id="test-log" class="test-log">
            <div class="log-entry info">æµ‹è¯•å¼€å§‹...</div>
        </div>
        
        <div style="margin-top: 15px;">
            <button class="test-button" onclick="runFullTest()">è¿è¡Œå®Œæ•´æµ‹è¯•</button>
            <button class="test-button success" onclick="clearLog()">æ¸…ç©ºæ—¥å¿—</button>
        </div>
    </div>

    <div class="test-container">
        <h2>ğŸ“‹ æµ‹è¯•æŒ‡å—</h2>
        <ol>
            <li><strong>åŸºç¡€å¯¼èˆªæµ‹è¯•ï¼š</strong>ç‚¹å‡»ä¸Šæ–¹æŒ‰é’®æµ‹è¯•å„ä¸ªé¡µé¢å¯¼èˆª</li>
            <li><strong>ç›´æ¥é“¾æ¥æµ‹è¯•ï¼š</strong>ç‚¹å‡»é“¾æ¥åœ¨æ–°æ ‡ç­¾é¡µä¸­ç›´æ¥è®¿é—®è·¯ç”±</li>
            <li><strong>è®¤è¯æµç¨‹æµ‹è¯•ï¼š</strong>æµ‹è¯•ç™»å½•/æœªç™»å½•çŠ¶æ€ä¸‹çš„é¡µé¢è®¿é—®</li>
            <li><strong>å“åº”é€Ÿåº¦æµ‹è¯•ï¼š</strong>è§‚å¯Ÿé¡µé¢è·³è½¬æ˜¯å¦ç«‹å³å“åº”</li>
        </ol>
        
        <div class="status info">
            <strong>é¢„æœŸç»“æœï¼š</strong>æ‰€æœ‰å¯¼èˆªè¯·æ±‚åº”è¯¥ç«‹å³å“åº”ï¼Œæ— å¡é¡¿æˆ–æ— å“åº”ç°è±¡
        </div>
    </div>

    <script>
        let testResults = [];
        let navigationTimeout;

        function addLog(message, type = 'info') {
            const log = document.getElementById('test-log');
            const entry = document.createElement('div');
            entry.className = `log-entry ${type}`;
            entry.textContent = `[${new Date().toLocaleTimeString()}] ${message}`;
            log.appendChild(entry);
            log.scrollTop = log.scrollHeight;
        }

        function updateStatus(message, type = 'info') {
            const status = document.getElementById('test-status');
            status.textContent = message;
            status.className = `status ${type}`;
        }

        function testNavigation(path) {
            addLog(`å¼€å§‹æµ‹è¯•å¯¼èˆªåˆ°: ${path}`, 'info');
            const iframe = document.getElementById('app-frame');
            
            // è®¾ç½®è¶…æ—¶æ£€æµ‹
            clearTimeout(navigationTimeout);
            navigationTimeout = setTimeout(() => {
                addLog(`âŒ å¯¼èˆªè¶…æ—¶: ${path}`, 'error');
                updateStatus('å¯¼èˆªæµ‹è¯•å¤±è´¥ - å­˜åœ¨å“åº”é—®é¢˜', 'error');
            }, 3000);

            try {
                // ç›‘å¬iframeåŠ è½½å®Œæˆ
                iframe.onload = () => {
                    clearTimeout(navigationTimeout);
                    addLog(`âœ… å¯¼èˆªæˆåŠŸ: ${path}`, 'success');
                    testResults.push({ path, success: true });
                    updateTestSummary();
                };

                // æ‰§è¡Œå¯¼èˆª
                iframe.src = `/#${path}`;
                addLog(`ğŸš€ æ‰§è¡Œå¯¼èˆª: ${path}`, 'info');
                
            } catch (error) {
                clearTimeout(navigationTimeout);
                addLog(`âŒ å¯¼èˆªé”™è¯¯: ${path} - ${error.message}`, 'error');
                testResults.push({ path, success: false, error: error.message });
                updateTestSummary();
            }
        }

        function updateTestSummary() {
            const total = testResults.length;
            const success = testResults.filter(r => r.success).length;
            const failed = total - success;
            
            if (total === 0) return;
            
            if (failed === 0) {
                updateStatus(`âœ… æ‰€æœ‰æµ‹è¯•é€šè¿‡ (${success}/${total})`, 'success');
            } else {
                updateStatus(`âš ï¸ éƒ¨åˆ†æµ‹è¯•å¤±è´¥ (${success}/${total} æˆåŠŸ, ${failed} å¤±è´¥)`, 'error');
            }
        }

        function runFullTest() {
            addLog('ğŸ§ª å¼€å§‹å®Œæ•´æµ‹è¯•åºåˆ—', 'info');
            testResults = [];
            
            const testPaths = ['/home', '/activities-teams', '/messages', '/profile', '/login'];
            let currentIndex = 0;
            
            function runNextTest() {
                if (currentIndex < testPaths.length) {
                    const path = testPaths[currentIndex];
                    testNavigation(path);
                    currentIndex++;
                    setTimeout(runNextTest, 4000); // æ¯ä¸ªæµ‹è¯•é—´éš”4ç§’
                } else {
                    addLog('ğŸ å®Œæ•´æµ‹è¯•åºåˆ—å®Œæˆ', 'info');
                }
            }
            
            runNextTest();
        }

        function clearLog() {
            const log = document.getElementById('test-log');
            log.innerHTML = '<div class="log-entry info">æ—¥å¿—å·²æ¸…ç©º...</div>';
            testResults = [];
            updateStatus('ç­‰å¾…æµ‹è¯•...', 'info');
        }

        // ç›‘å¬iframeé”™è¯¯
        document.getElementById('app-frame').onerror = () => {
            clearTimeout(navigationTimeout);
            addLog('âŒ iframeåŠ è½½é”™è¯¯', 'error');
        };

        // é¡µé¢åŠ è½½å®Œæˆåçš„åˆå§‹åŒ–
        window.onload = () => {
            addLog('ğŸ“± æµ‹è¯•é¡µé¢åŠ è½½å®Œæˆ', 'success');
            updateStatus('å‡†å¤‡å°±ç»ª - å¼€å§‹æµ‹è¯•å¯¼èˆªåŠŸèƒ½', 'info');
        };
    </script>
</body>
</html>