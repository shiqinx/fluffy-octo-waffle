<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ´»åŠ¨æ•°æ®ç»ˆæä¿®å¤</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .status {
            padding: 15px;
            margin: 10px 0;
            border-radius: 5px;
            font-weight: bold;
        }
        .success { background-color: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .warning { background-color: #fff3cd; color: #856404; border: 1px solid #ffeaa7; }
        .error { background-color: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
        .info { background-color: #d1ecf1; color: #0c5460; border: 1px solid #bee5eb; }
        button {
            background-color: #007bff;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
            font-size: 16px;
        }
        button:hover { background-color: #0056b3; }
        button.danger { background-color: #dc3545; }
        button.danger:hover { background-color: #c82333; }
        button.success { background-color: #28a745; }
        button.success:hover { background-color: #218838; }
        .activity-list {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            margin: 10px 0;
        }
        .activity-item {
            background: white;
            padding: 10px;
            margin: 5px 0;
            border-radius: 3px;
            border-left: 4px solid #007bff;
        }
        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        .stat-card {
            background: white;
            padding: 15px;
            border-radius: 5px;
            text-align: center;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        .stat-number {
            font-size: 24px;
            font-weight: bold;
            color: #007bff;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ”§ æ´»åŠ¨æ•°æ®ç»ˆæä¿®å¤å·¥å…·</h1>
        <p>è¿™ä¸ªå·¥å…·å°†å½»åº•è§£å†³æ´»åŠ¨åˆ—è¡¨çš„æ˜¾ç¤ºé—®é¢˜ï¼ŒåŒ…æ‹¬è‹±è¯­è§’å’Œç¯®çƒèµ›çš„é‡å¤é—®é¢˜ã€‚</p>
        
        <div id="status"></div>
        
        <div class="stats" id="stats" style="display: none;">
            <div class="stat-card">
                <div class="stat-number" id="total-count">0</div>
                <div>æ€»æ´»åŠ¨æ•°</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="english-count">0</div>
                <div>è‹±è¯­è§’æ´»åŠ¨</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="basketball-count">0</div>
                <div>ç¯®çƒèµ›æ´»åŠ¨</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="normal-count">0</div>
                <div>æ­£å¸¸æ´»åŠ¨</div>
            </div>
        </div>
        
        <div style="margin: 20px 0;">
            <button onclick="checkData()" class="info">ğŸ“Š æ£€æŸ¥å½“å‰æ•°æ®</button>
            <button onclick="fixData()" class="success">ğŸ”§ ä¿®å¤æ´»åŠ¨æ•°æ®</button>
            <button onclick="clearData()" class="danger">ğŸ—‘ï¸ æ¸…ç©ºæ‰€æœ‰æ•°æ®</button>
            <button onclick="goToActivities()">ğŸ“‹ æŸ¥çœ‹æ´»åŠ¨åˆ—è¡¨</button>
        </div>
        
        <div id="activity-list" class="activity-list" style="display: none;">
            <h3>å½“å‰æ´»åŠ¨åˆ—è¡¨ï¼š</h3>
            <div id="activities"></div>
        </div>
    </div>

    <script>
        // æ­£ç¡®çš„æ´»åŠ¨æ•°æ®
        const correctActivities = [
            {
                id: 1,
                title: 'ä¸­åŒ»å…»ç”Ÿè®²åº§',
                type: 'å­¦æœ¯è®²åº§',
                category: 'study',
                description: 'é‚€è¯·è‘—åä¸­åŒ»ä¸“å®¶è®²è§£ä¼ ç»Ÿå…»ç”ŸçŸ¥è¯†ï¼ŒåŒ…æ‹¬å››å­£å…»ç”Ÿã€é£Ÿç–—å…»ç”Ÿã€è¿åŠ¨å…»ç”Ÿç­‰å†…å®¹ã€‚ç°åœºè¿˜æœ‰å…è´¹ä¸­åŒ»ä½“è´¨æ£€æµ‹æœåŠ¡ã€‚',
                locationName: 'å­¦æœ¯æŠ¥å‘Šå…',
                location: {
                    name: 'å­¦æœ¯æŠ¥å‘Šå…',
                    address: 'å¹¿ä¸œè¯ç§‘å¤§å­¦äº‘æµ®æ ¡åŒºå­¦æœ¯æŠ¥å‘Šå…'
                },
                startTime: '2024-12-20T14:00:00',
                endTime: '2024-12-20T16:30:00',
                registrationDeadline: '2024-12-19T23:59:59',
                currentParticipants: 156,
                maxParticipants: 200,
                organizer: {
                    id: 1,
                    name: 'ä¸­åŒ»å­¦é™¢',
                    avatar: '',
                    role: 'ç»„ç»‡è€…',
                    creditScore: 98
                },
                status: 'open',
                isEnrolled: false,
                distance: 0.3,
                tags: ['å¥åº·', 'å…»ç”Ÿ', 'ä¸­åŒ»', 'è®²åº§']
            },
            {
                id: 2,
                title: 'æ‘„å½±ä½œå“å±•è§ˆ',
                type: 'æ–‡åŒ–è‰ºæœ¯',
                category: 'culture',
                description: 'å±•ç¤ºæˆ‘æ ¡æ‘„å½±çˆ±å¥½è€…çš„ä¼˜ç§€ä½œå“ï¼ŒåŒ…æ‹¬æ ¡å›­é£å…‰ã€äººç‰©è‚–åƒã€çºªå®æ‘„å½±ç­‰å¤šä¸ªç±»åˆ«ã€‚å¼€å¹•å¼å°†æœ‰ä¸“ä¸šæ‘„å½±å¸ˆç°åœºåˆ†äº«æ‹æ‘„æŠ€å·§ã€‚',
                locationName: 'è‰ºæœ¯å±•è§ˆä¸­å¿ƒ',
                location: {
                    name: 'è‰ºæœ¯å±•è§ˆä¸­å¿ƒ',
                    address: 'å¹¿ä¸œè¯ç§‘å¤§å­¦äº‘æµ®æ ¡åŒºè‰ºæœ¯å±•è§ˆä¸­å¿ƒ'
                },
                startTime: '2024-12-21T10:00:00',
                endTime: '2024-12-25T18:00:00',
                registrationDeadline: '2024-12-20T23:59:59',
                currentParticipants: 234,
                maxParticipants: 500,
                organizer: {
                    id: 2,
                    name: 'æ‘„å½±åä¼š',
                    avatar: '',
                    role: 'ç»„ç»‡è€…',
                    creditScore: 95
                },
                status: 'open',
                isEnrolled: false,
                distance: 0.5,
                tags: ['æ‘„å½±', 'è‰ºæœ¯', 'å±•è§ˆ', 'æ–‡åŒ–']
            },
            {
                id: 3,
                title: 'ç¼–ç¨‹é©¬æ‹‰æ¾å¤§èµ›',
                type: 'ç§‘æŠ€åˆ›æ–°',
                category: 'tech',
                description: '48å°æ—¶ç¼–ç¨‹æŒ‘æˆ˜èµ›ï¼Œä¸»é¢˜ä¸º"æ™ºæ…§æ ¡å›­"ã€‚å‚èµ›è€…éœ€è¦åœ¨è§„å®šæ—¶é—´å†…å®Œæˆåˆ›æ–°é¡¹ç›®å¼€å‘ï¼Œä¼˜èƒœå›¢é˜Ÿå°†è·å¾—ä¸°åšå¥–å“å’Œå®ä¹ æœºä¼šã€‚',
                locationName: 'åˆ›æ–°å®éªŒå®¤',
                location: {
                    name: 'åˆ›æ–°å®éªŒå®¤',
                    address: 'å¹¿ä¸œè¯ç§‘å¤§å­¦äº‘æµ®æ ¡åŒºåˆ›æ–°å®éªŒå®¤'
                },
                startTime: '2024-12-22T09:00:00',
                endTime: '2024-12-24T09:00:00',
                registrationDeadline: '2024-12-21T23:59:59',
                currentParticipants: 87,
                maxParticipants: 100,
                organizer: {
                    id: 3,
                    name: 'è®¡ç®—æœºå­¦é™¢',
                    avatar: '',
                    role: 'ç»„ç»‡è€…',
                    creditScore: 96
                },
                status: 'open',
                isEnrolled: false,
                distance: 1.2,
                tags: ['ç¼–ç¨‹', 'åˆ›æ–°', 'æ¯”èµ›', 'æŠ€æœ¯']
            },
            {
                id: 4,
                title: 'ç¯®çƒå‹è°Šèµ›',
                type: 'ä½“è‚²ç«æŠ€',
                category: 'sports',
                description: 'é™¢ç³»é—´ç¯®çƒå‹è°Šèµ›ï¼Œä¿ƒè¿›å„é™¢ç³»äº¤æµã€‚æ¯”èµ›é‡‡ç”¨å›½é™…ç¯®è”è§„åˆ™ï¼Œè®¾æœ‰MVPå¥–é¡¹å’Œæœ€ä½³å›¢é˜Ÿå¥–ã€‚',
                locationName: 'ä½“è‚²é¦†',
                location: {
                    name: 'ä½“è‚²é¦†',
                    address: 'å¹¿ä¸œè¯ç§‘å¤§å­¦äº‘æµ®æ ¡åŒºä½“è‚²é¦†'
                },
                startTime: '2024-12-23T16:00:00',
                endTime: '2024-12-23T18:00:00',
                registrationDeadline: '2024-12-22T23:59:59',
                currentParticipants: 178,
                maxParticipants: 200,
                organizer: {
                    id: 4,
                    name: 'ä½“è‚²éƒ¨',
                    avatar: '',
                    role: 'ç»„ç»‡è€…',
                    creditScore: 94
                },
                status: 'open',
                isEnrolled: false,
                distance: 0.8,
                tags: ['ç¯®çƒ', 'ä½“è‚²', 'æ¯”èµ›', 'å‹è°Šèµ›']
            },
            {
                id: 5,
                title: 'æ ¡å›­éŸ³ä¹èŠ‚',
                type: 'æ–‡è‰ºæ¼”å‡º',
                category: 'culture',
                description: 'å¹´åº¦æ ¡å›­éŸ³ä¹ç››å…¸ï¼Œé‚€è¯·æ ¡å†…çŸ¥åä¹é˜Ÿå’Œæ ¡å¤–ä¸“ä¸šéŸ³ä¹äººåŒå°æ¼”å‡ºã€‚æ¶µç›–æ‘‡æ»šã€æ°‘è°£ã€æµè¡Œç­‰å¤šç§éŸ³ä¹é£æ ¼ã€‚',
                locationName: 'å¤§å­¦ç”Ÿæ´»åŠ¨ä¸­å¿ƒ',
                location: {
                    name: 'å¤§å­¦ç”Ÿæ´»åŠ¨ä¸­å¿ƒ',
                    address: 'å¹¿ä¸œè¯ç§‘å¤§å­¦äº‘æµ®æ ¡åŒºå¤§å­¦ç”Ÿæ´»åŠ¨ä¸­å¿ƒ'
                },
                startTime: '2024-12-24T19:00:00',
                endTime: '2024-12-24T22:30:00',
                registrationDeadline: '2024-12-23T23:59:59',
                currentParticipants: 856,
                maxParticipants: 1000,
                organizer: {
                    id: 5,
                    name: 'å­¦ç”Ÿä¼šæ–‡è‰ºéƒ¨',
                    avatar: '',
                    role: 'ç»„ç»‡è€…',
                    creditScore: 92
                },
                status: 'open',
                isEnrolled: false,
                distance: 0.6,
                tags: ['éŸ³ä¹', 'æ¼”å‡º', 'æ–‡è‰º', 'éŸ³ä¹èŠ‚']
            },
            {
                id: 6,
                title: 'å›¾ä¹¦é¦†å­¦ä¹ å°ç»„',
                type: 'å­¦ä¹ äº¤æµ',
                category: 'study',
                description: 'ä¸ºæœŸä¸€å‘¨çš„é›†ä¸­å­¦ä¹ æ´»åŠ¨ï¼Œæä¾›å®‰é™çš„å­¦ä¹ ç¯å¢ƒå’Œä¸“ä¸šçš„å­¦ä¹ æŒ‡å¯¼ã€‚æ¯æ—¥æœ‰ä¸åŒå­¦ç§‘çš„è€å¸ˆç°åœºç­”ç–‘ã€‚',
                locationName: 'å›¾ä¹¦é¦†ç ”è®¨å®¤',
                location: {
                    name: 'å›¾ä¹¦é¦†ç ”è®¨å®¤',
                    address: 'å¹¿ä¸œè¯ç§‘å¤§å­¦äº‘æµ®æ ¡åŒºå›¾ä¹¦é¦†ç ”è®¨å®¤'
                },
                startTime: '2024-12-19T09:00:00',
                endTime: '2024-12-25T21:00:00',
                registrationDeadline: '2024-12-18T23:59:59',
                currentParticipants: 42,
                maxParticipants: 50,
                organizer: {
                    id: 6,
                    name: 'å›¾ä¹¦é¦†',
                    avatar: '',
                    role: 'ç»„ç»‡è€…',
                    creditScore: 99
                },
                status: 'open',
                isEnrolled: false,
                distance: 0.4,
                tags: ['å­¦ä¹ ', 'å›¾ä¹¦é¦†', 'ç ”è®¨', 'äº¤æµ']
            }
        ];

        function showStatus(message, type = 'info') {
            const statusDiv = document.getElementById('status');
            statusDiv.innerHTML = `<div class="status ${type}">${message}</div>`;
        }

        function checkData() {
            try {
                const activitiesData = localStorage.getItem('activities');
                let activities = [];
                
                if (activitiesData) {
                    activities = JSON.parse(activitiesData);
                }
                
                if (activities.length === 0) {
                    showStatus('ğŸ“­ localStorageä¸­æ²¡æœ‰æ´»åŠ¨æ•°æ®', 'warning');
                    return;
                }
                
                const totalCount = activities.length;
                const englishCount = activities.filter(a => a.title && a.title.includes('è‹±è¯­è§’')).length;
                const basketballCount = activities.filter(a => a.title && (a.title.includes('ç¯®çƒ') || a.title.includes('ç¯®çƒèµ›'))).length;
                const normalCount = totalCount - englishCount - basketballCount;
                
                // æ›´æ–°ç»Ÿè®¡æ•°æ®
                document.getElementById('total-count').textContent = totalCount;
                document.getElementById('english-count').textContent = englishCount;
                document.getElementById('basketball-count').textContent = basketballCount;
                document.getElementById('normal-count').textContent = normalCount;
                document.getElementById('stats').style.display = 'grid';
                
                // æ˜¾ç¤ºæ´»åŠ¨åˆ—è¡¨
                const activitiesDiv = document.getElementById('activities');
                activitiesDiv.innerHTML = activities.map((activity, index) => `
                    <div class="activity-item">
                        <strong>${index + 1}. ${activity.title}</strong><br>
                        <small>ç±»å‹: ${activity.type || 'æœªçŸ¥'} | çŠ¶æ€: ${activity.status || 'æœªçŸ¥'}</small>
                    </div>
                `).join('');
                document.getElementById('activity-list').style.display = 'block';
                
                // åˆ¤æ–­é—®é¢˜
                if (englishCount > totalCount * 0.8) {
                    showStatus(`âš ï¸ æ£€æµ‹åˆ°è‹±è¯­è§’é—®é¢˜ï¼š${englishCount}/${totalCount} (${(englishCount/totalCount*100).toFixed(1)}%)`, 'warning');
                } else if (basketballCount > totalCount * 0.8) {
                    showStatus(`âš ï¸ æ£€æµ‹åˆ°ç¯®çƒèµ›é—®é¢˜ï¼š${basketballCount}/${totalCount} (${(basketballCount/totalCount*100).toFixed(1)}%)`, 'warning');
                } else if (normalCount === 0) {
                    showStatus(`âš ï¸ æ£€æµ‹åˆ°æ•°æ®å¼‚å¸¸ï¼šæ²¡æœ‰æ­£å¸¸æ´»åŠ¨`, 'warning');
                } else {
                    showStatus(`âœ… æ•°æ®æ­£å¸¸ï¼š${totalCount}ä¸ªæ´»åŠ¨ï¼ŒåŒ…å«${normalCount}ä¸ªæ­£å¸¸æ´»åŠ¨`, 'success');
                }
                
            } catch (error) {
                showStatus(`âŒ æ£€æŸ¥æ•°æ®å¤±è´¥: ${error.message}`, 'error');
            }
        }

        function fixData() {
            try {
                // ä¿å­˜æ­£ç¡®çš„æ´»åŠ¨æ•°æ®åˆ°localStorage
                localStorage.setItem('activities', JSON.stringify(correctActivities));
                
                showStatus('âœ… æ´»åŠ¨æ•°æ®å·²ä¿®å¤ï¼ç°åœ¨åŒ…å«6ä¸ªå¤šæ ·åŒ–çš„æ´»åŠ¨', 'success');
                
                // æ›´æ–°ç»Ÿè®¡æ˜¾ç¤º
                document.getElementById('total-count').textContent = '6';
                document.getElementById('english-count').textContent = '0';
                document.getElementById('basketball-count').textContent = '1';
                document.getElementById('normal-count').textContent = '5';
                document.getElementById('stats').style.display = 'grid';
                
                // æ˜¾ç¤ºä¿®å¤åçš„æ´»åŠ¨åˆ—è¡¨
                const activitiesDiv = document.getElementById('activities');
                activitiesDiv.innerHTML = correctActivities.map((activity, index) => `
                    <div class="activity-item">
                        <strong>${index + 1}. ${activity.title}</strong><br>
                        <small>ç±»å‹: ${activity.type} | åœ°ç‚¹: ${activity.locationName}</small>
                    </div>
                `).join('');
                document.getElementById('activity-list').style.display = 'block';
                
            } catch (error) {
                showStatus(`âŒ ä¿®å¤æ•°æ®å¤±è´¥: ${error.message}`, 'error');
            }
        }

        function clearData() {
            if (confirm('ç¡®å®šè¦æ¸…ç©ºæ‰€æœ‰æ´»åŠ¨æ•°æ®å—ï¼Ÿè¿™å°†åˆ é™¤localStorageä¸­çš„æ‰€æœ‰æ´»åŠ¨ä¿¡æ¯ã€‚')) {
                try {
                    localStorage.removeItem('activities');
                    showStatus('ğŸ—‘ï¸ æ‰€æœ‰æ´»åŠ¨æ•°æ®å·²æ¸…ç©º', 'info');
                    document.getElementById('stats').style.display = 'none';
                    document.getElementById('activity-list').style.display = 'none';
                } catch (error) {
                    showStatus(`âŒ æ¸…ç©ºæ•°æ®å¤±è´¥: ${error.message}`, 'error');
                }
            }
        }

        function goToActivities() {
            window.open('http://localhost:3000/activities', '_blank');
        }

        // é¡µé¢åŠ è½½æ—¶è‡ªåŠ¨æ£€æŸ¥æ•°æ®
        window.onload = function() {
            checkData();
        };
    </script>
</body>
</html>