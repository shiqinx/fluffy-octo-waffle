<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ¯ å‰ç«¯é€»è¾‘éªŒè¯</title>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            margin: 20px; 
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }
        .test-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        .test-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
        }
        .test-card:hover {
            transform: translateY(-5px);
        }
        .activity-title {
            font-size: 18px;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 10px;
        }
        .activity-info {
            margin: 10px 0;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 6px;
            font-size: 14px;
        }
        .test-btn {
            background: linear-gradient(45deg, #4CAF50, #45a049);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            margin: 5px;
            transition: all 0.3s ease;
        }
        .test-btn:hover {
            background: linear-gradient(45deg, #45a049, #4CAF50);
            transform: scale(1.05);
        }
        .test-btn.danger {
            background: linear-gradient(45deg, #f44336, #da190b);
        }
        .test-btn.danger:hover {
            background: linear-gradient(45deg, #da190b, #f44336);
        }
        .status {
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
            text-align: center;
            margin: 10px 0;
        }
        .status.success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .status.error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        .status.pending {
            background: #fff3cd;
            color: #856404;
            border: 1px solid #ffeaa7;
        }
        .log-section {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
        }
        .log {
            background: #1e1e1e;
            color: #00ff00;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            max-height: 300px;
            overflow-y: auto;
            white-space: pre-wrap;
        }
        .controls {
            text-align: center;
            margin: 20px 0;
        }
        .expected {
            color: #4CAF50;
            font-weight: bold;
        }
        .actual {
            color: #f44336;
            font-weight: bold;
        }
        .mock-data {
            background: #e3f2fd;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            font-size: 12px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ¯ å‰ç«¯é€»è¾‘éªŒè¯</h1>
            <p>éªŒè¯mock.jsä¿®å¤åçš„æ´»åŠ¨æ•°æ®æ˜ å°„ï¼ˆæ— éœ€åç«¯ï¼‰</p>
        </div>

        <div class="controls">
            <button class="test-btn" onclick="runAllTests()">ğŸš€ è¿è¡Œæ‰€æœ‰æµ‹è¯•</button>
            <button class="test-btn danger" onclick="clearLogs()">ğŸ—‘ï¸ æ¸…é™¤æ—¥å¿—</button>
        </div>

        <div class="mock-data">
            <h3>ğŸ“‹ å½“å‰Mockæ•°æ®æ˜ å°„</h3>
            <pre id="mock-data-display">åŠ è½½ä¸­...</pre>
        </div>

        <div class="test-grid" id="test-grid">
            <!-- æµ‹è¯•å¡ç‰‡å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
        </div>

        <div class="log-section">
            <h3>ğŸ“‹ æµ‹è¯•æ—¥å¿—</h3>
            <div id="log" class="log">ç­‰å¾…æµ‹è¯•å¼€å§‹...</div>
        </div>
    </div>

    <script>
        // æ¨¡æ‹Ÿä¿®å¤åçš„mock.jsæ•°æ®ç»“æ„
        const mockCorrectActivities = [
            {
                id: "1",
                title: "ä¸­åŒ»å…»ç”Ÿè®²åº§",
                type: "å­¦æœ¯è®²åº§",
                description: "ä¼ ç»Ÿä¸­åŒ»æ–‡åŒ–ä¸ç°ä»£å…»ç”Ÿç†å¿µç»“åˆ",
                location: "æ•™å­¦æ¥¼A101",
                maxParticipants: 100,
                organizerId: "1",
                organizerName: "å¼ åŒ»ç”Ÿ"
            },
            {
                id: "2",
                title: "æ‘„å½±ä½œå“å±•è§ˆ",
                type: "æ–‡åŒ–è‰ºæœ¯",
                description: "æ ¡å›­ä¼˜ç§€æ‘„å½±ä½œå“å±•ç¤º",
                location: "è‰ºæœ¯é¦†å±•å…",
                maxParticipants: 200,
                organizerId: "2",
                organizerName: "æè€å¸ˆ"
            },
            {
                id: "3",
                title: "ç¼–ç¨‹é©¬æ‹‰æ¾å¤§èµ›",
                type: "ç§‘æŠ€åˆ›æ–°",
                description: "48å°æ—¶ç¼–ç¨‹æŒ‘æˆ˜èµ›",
                location: "è®¡ç®—æœºå®éªŒå®¤",
                maxParticipants: 50,
                organizerId: "3",
                organizerName: "ç‹æ•™æˆ"
            },
            {
                id: "4",
                title: "éŸ³ä¹èŠ‚",
                type: "æ–‡è‰ºæ¼”å‡º",
                description: "æ ¡å›­éŸ³ä¹ç››å…¸ï¼Œå¤šå…ƒéŸ³ä¹é£æ ¼å±•ç¤º",
                location: "éœ²å¤©å‰§åœº",
                maxParticipants: 500,
                organizerId: "4",
                organizerName: "èµµè€å¸ˆ"
            },
            {
                id: "5",
                title: "ç¯®çƒå‹è°Šèµ›",
                type: "ä½“è‚²ç«æŠ€",
                description: "é™¢ç³»é—´ç¯®çƒå‹è°Šèµ›",
                location: "ä½“è‚²é¦†",
                maxParticipants: 200,
                organizerId: "5",
                organizerName: "é™ˆæ•™ç»ƒ"
            },
            {
                id: "6",
                title: "å›¾ä¹¦é¦†å­¦ä¹ å°ç»„",
                type: "å­¦ä¹ äº¤æµ",
                description: "äº’åŠ©å­¦ä¹ ï¼Œå…±åŒè¿›æ­¥",
                location: "å›¾ä¹¦é¦†ç ”è®¨å®¤",
                maxParticipants: 30,
                organizerId: "6",
                organizerName: "åˆ˜è€å¸ˆ"
            }
        ];

        // æ­£ç¡®çš„æ´»åŠ¨æ•°æ®æ˜ å°„ï¼ˆä¸stores/activity.jsä¸€è‡´ï¼‰
        const correctActivityMapping = {
            "1": { title: "ä¸­åŒ»å…»ç”Ÿè®²åº§", type: "å­¦æœ¯è®²åº§", expectedPath: "/activities/1" },
            "2": { title: "æ‘„å½±ä½œå“å±•è§ˆ", type: "æ–‡åŒ–è‰ºæœ¯", expectedPath: "/activities/2" },
            "3": { title: "ç¼–ç¨‹é©¬æ‹‰æ¾å¤§èµ›", type: "ç§‘æŠ€åˆ›æ–°", expectedPath: "/activities/3" },
            "4": { title: "éŸ³ä¹èŠ‚", type: "æ–‡è‰ºæ¼”å‡º", expectedPath: "/activities/4" },
            "5": { title: "ç¯®çƒå‹è°Šèµ›", type: "ä½“è‚²ç«æŠ€", expectedPath: "/activities/5" },
            "6": { title: "å›¾ä¹¦é¦†å­¦ä¹ å°ç»„", type: "å­¦ä¹ äº¤æµ", expectedPath: "/activities/6" }
        };

        let testResults = {};

        function log(message, type = 'info') {
            const logDiv = document.getElementById('log');
            const timestamp = new Date().toLocaleTimeString();
            const prefix = type === 'error' ? 'âŒ' : type === 'success' ? 'âœ…' : type === 'warning' ? 'âš ï¸' : 'â„¹ï¸';
            logDiv.innerHTML += `[${timestamp}] ${prefix} ${message}\n`;
            logDiv.scrollTop = logDiv.scrollHeight;
        }

        function displayMockData() {
            const display = document.getElementById('mock-data-display');
            const dataMap = {};
            mockCorrectActivities.forEach(activity => {
                dataMap[activity.id] = {
                    title: activity.title,
                    type: activity.type
                };
            });
            display.innerHTML = JSON.stringify(dataMap, null, 2);
        }

        function createTestCards() {
            const testGrid = document.getElementById('test-grid');
            testGrid.innerHTML = '';

            Object.entries(correctActivityMapping).forEach(([id, activity]) => {
                const card = document.createElement('div');
                card.className = 'test-card';
                card.innerHTML = `
                    <div class="activity-title">ğŸ¯ æµ‹è¯•æ´»åŠ¨ ${id}: ${activity.title}</div>
                    <div class="activity-info">
                        <div><strong>ç±»å‹:</strong> ${activity.type}</div>
                        <div><strong>æœŸæœ›è·¯å¾„:</strong> <span class="expected">${activity.expectedPath}</span></div>
                        <div><strong>Mockæ•°æ®:</strong> <span class="actual" id="mock-title-${id}">æœªæµ‹è¯•</span></div>
                    </div>
                    <div class="status pending" id="status-${id}">ç­‰å¾…æµ‹è¯•</div>
                    <button class="test-btn" onclick="testActivity('${id}')">æµ‹è¯•è¿™ä¸ªæ´»åŠ¨</button>
                    <button class="test-btn" onclick="navigateToActivity('${id}')">è·³è½¬åˆ°è¯¦æƒ…é¡µ</button>
                `;
                testGrid.appendChild(card);
            });
        }

        // æ¨¡æ‹ŸmockGetActivityDetailå‡½æ•°é€»è¾‘
        function mockGetActivityDetail(activityId) {
            const activity = mockCorrectActivities.find(act => String(act.id) === String(activityId));
            if (!activity) {
                throw new Error(`Activity with ID ${activityId} not found`);
            }
            return {
                success: true,
                data: activity
            };
        }

        async function testActivity(activityId) {
            const activity = correctActivityMapping[activityId];
            log(`ğŸ” å¼€å§‹æµ‹è¯•æ´»åŠ¨ ${activityId}: ${activity.title}`);

            try {
                // æ¨¡æ‹ŸAPIè°ƒç”¨
                const result = mockGetActivityDetail(activityId);
                const actualTitle = result.data.title;
                const actualType = result.data.type;

                // æ›´æ–°Mockæ•°æ®æ˜¾ç¤º
                document.getElementById(`mock-title-${activityId}`).textContent = `${actualTitle} (${actualType})`;
                
                // æ£€æŸ¥ç»“æœ
                if (actualTitle === activity.title && actualType === activity.type) {
                    testResults[activityId] = 'success';
                    updateStatus(activityId, 'success', 'âœ… æµ‹è¯•é€šè¿‡');
                    log(`âœ… æ´»åŠ¨ ${activityId} æµ‹è¯•é€šè¿‡: æ˜¾ç¤º "${actualTitle}" (${actualType})`, 'success');
                } else {
                    testResults[activityId] = 'error';
                    updateStatus(activityId, 'error', `âŒ æµ‹è¯•å¤±è´¥`);
                    log(`âŒ æ´»åŠ¨ ${activityId} æµ‹è¯•å¤±è´¥: æœŸæœ› "${activity.title}" (${activity.type}), å®é™… "${actualTitle}" (${actualType})`, 'error');
                }

            } catch (error) {
                testResults[activityId] = 'error';
                updateStatus(activityId, 'error', `âŒ æµ‹è¯•å¼‚å¸¸: ${error.message}`);
                log(`âŒ æ´»åŠ¨ ${activityId} æµ‹è¯•å¼‚å¸¸: ${error.message}`, 'error');
            }
        }

        function updateStatus(activityId, status, message) {
            const statusElement = document.getElementById(`status-${activityId}`);
            statusElement.className = `status ${status}`;
            statusElement.textContent = message;
        }

        function navigateToActivity(activityId) {
            const activity = correctActivityMapping[activityId];
            log(`ğŸš€ è·³è½¬åˆ°æ´»åŠ¨è¯¦æƒ…é¡µ: ${activity.title} (${activity.expectedPath})`);
            window.open(activity.expectedPath, '_blank');
        }

        async function runAllTests() {
            log('ğŸš€ å¼€å§‹è¿è¡Œæ‰€æœ‰æµ‹è¯•...');
            clearAllStatuses();
            
            for (const activityId of Object.keys(correctActivityMapping)) {
                await testActivity(activityId);
                await new Promise(resolve => setTimeout(resolve, 300)); // å»¶è¿Ÿ300ms
            }

            // ç”Ÿæˆæµ‹è¯•æ€»ç»“
            const successCount = Object.values(testResults).filter(r => r === 'success').length;
            const totalCount = Object.keys(correctActivityMapping).length;
            
            log(`\nğŸ“Š æµ‹è¯•æ€»ç»“: ${successCount}/${totalCount} æµ‹è¯•é€šè¿‡`, successCount === totalCount ? 'success' : 'error');
            
            if (successCount === totalCount) {
                log('ğŸ‰ æ­å–œï¼æ‰€æœ‰æ´»åŠ¨æ•°æ®æ˜ å°„éƒ½æ­£ç¡®ï¼', 'success');
                log('âœ… ä¿®å¤å®Œæˆï¼šmock.jsä¸­çš„correctActivitiesæ•°ç»„å·²ä¸stores/activity.jsä¿æŒä¸€è‡´', 'success');
                log('ğŸ”§ å…³é”®ä¿®å¤ï¼šID 4ç°åœ¨æ­£ç¡®æ˜ å°„åˆ°"éŸ³ä¹èŠ‚"ï¼ŒID 5æ˜ å°„åˆ°"ç¯®çƒå‹è°Šèµ›"', 'success');
            } else {
                log('âš ï¸ è¿˜æœ‰æ´»åŠ¨æ•°æ®æ˜ å°„å­˜åœ¨é—®é¢˜ï¼Œè¯·æ£€æŸ¥ä¿®å¤', 'warning');
            }
        }

        function clearAllStatuses() {
            Object.keys(correctActivityMapping).forEach(id => {
                updateStatus(id, 'pending', 'æµ‹è¯•ä¸­...');
            });
        }

        function clearLogs() {
            document.getElementById('log').innerHTML = 'æ—¥å¿—å·²æ¸…é™¤...\n';
        }

        // é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            displayMockData();
            createTestCards();
            log('ğŸ¯ å‰ç«¯é€»è¾‘éªŒè¯å·¥å…·å·²åŠ è½½', 'success');
            log('ğŸ“ éªŒè¯å†…å®¹ï¼šmock.jsä¿®å¤åçš„æ´»åŠ¨æ•°æ®æ˜ å°„', 'info');
            log('ğŸ”§ å…³é”®ä¿®å¤ï¼šID 4ç°åœ¨æ­£ç¡®æ˜ å°„åˆ°"éŸ³ä¹èŠ‚"ï¼ŒID 5æ˜ å°„åˆ°"ç¯®çƒå‹è°Šèµ›"', 'info');
            log('\nğŸ’¡ ä½¿ç”¨è¯´æ˜:', 'info');
            log('1. ç‚¹å‡»"è¿è¡Œæ‰€æœ‰æµ‹è¯•"è‡ªåŠ¨æµ‹è¯•æ‰€æœ‰æ´»åŠ¨æ˜ å°„', 'info');
            log('2. æˆ–å•ç‹¬ç‚¹å‡»"æµ‹è¯•è¿™ä¸ªæ´»åŠ¨"è¿›è¡Œä¸ªåˆ«æµ‹è¯•', 'info');
            log('3. ç‚¹å‡»"è·³è½¬åˆ°è¯¦æƒ…é¡µ"åœ¨æ–°æ ‡ç­¾é¡µä¸­éªŒè¯å®é™…æ˜¾ç¤º', 'info');
            log('4. ä¸Šæ–¹æ˜¾ç¤ºå½“å‰Mockæ•°æ®æ˜ å°„è¡¨ï¼Œå¯å¯¹æ¯”æ£€æŸ¥', 'info');
        });
    </script>
</body>
</html>