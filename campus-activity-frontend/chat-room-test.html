<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>èŠå¤©å®¤åŠŸèƒ½æµ‹è¯•</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            text-align: center;
        }
        .content {
            padding: 20px;
        }
        .test-section {
            margin-bottom: 30px;
            padding: 15px;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            background: #fafafa;
        }
        .test-section h3 {
            margin-top: 0;
            color: #333;
        }
        .quick-links {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }
        .quick-link {
            background: #667eea;
            color: white;
            padding: 10px 20px;
            text-decoration: none;
            border-radius: 5px;
            transition: background 0.3s;
        }
        .quick-link:hover {
            background: #5a6fd8;
        }
        .test-result {
            margin-top: 10px;
            padding: 10px;
            border-radius: 5px;
            font-weight: bold;
        }
        .success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        .info {
            background: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }
        .feature-list {
            list-style: none;
            padding: 0;
        }
        .feature-list li {
            padding: 8px 0;
            border-bottom: 1px solid #eee;
        }
        .feature-list li:before {
            content: "âœ… ";
            color: green;
            font-weight: bold;
        }
        .status-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 8px;
        }
        .status-ok { background: #28a745; }
        .status-error { background: #dc3545; }
        .status-warning { background: #ffc107; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ—¨ï¸ èŠå¤©å®¤åŠŸèƒ½æµ‹è¯•</h1>
            <p>æµ‹è¯•æ ¡å›­æ´»åŠ¨ç³»ç»Ÿçš„èŠå¤©å®¤åŠŸèƒ½</p>
        </div>
        
        <div class="content">
            <div class="quick-links">
                <a href="http://localhost:5173" class="quick-link">ğŸ  ä¸»é¡µ</a>
                <a href="http://localhost:5173/messages" class="quick-link">ğŸ’¬ æ¶ˆæ¯ä¸­å¿ƒ</a>
                <a href="http://localhost:5173/activity/1" class="quick-link">ğŸ¯ æ´»åŠ¨è¯¦æƒ…</a>
                <a href="http://localhost:5173/chat/1" class="quick-link">ğŸ’­ èŠå¤©å®¤</a>
                <a href="http://localhost:5173/create-activity" class="quick-link">â• åˆ›å»ºæ´»åŠ¨</a>
            </div>

            <div class="test-section">
                <h3><span class="status-indicator status-ok"></span>ç¯å¢ƒæ£€æŸ¥</h3>
                <div id="environment-status">
                    <p>æ­£åœ¨æ£€æŸ¥å¼€å‘æœåŠ¡å™¨çŠ¶æ€...</p>
                </div>
            </div>

            <div class="test-section">
                <h3>ğŸ§ª åŠŸèƒ½æµ‹è¯•æ­¥éª¤</h3>
                <ol>
                    <li><strong>æ¶ˆæ¯é¡µé¢å…¥å£æµ‹è¯•</strong>ï¼šåœ¨æ¶ˆæ¯ä¸­å¿ƒæŸ¥çœ‹æ˜¯å¦æœ‰æ´»åŠ¨èŠå¤©æ¶ˆæ¯</li>
                    <li><strong>æ´»åŠ¨è¯¦æƒ…é¡µå…¥å£æµ‹è¯•</strong>ï¼šè¿›å…¥æ´»åŠ¨è¯¦æƒ…é¡µï¼Œç‚¹å‡»"èŠå¤©å®¤"æŒ‰é’®</li>
                    <li><strong>èŠå¤©å®¤é¡µé¢åŠŸèƒ½æµ‹è¯•</strong>ï¼š
                        <ul>
                            <li>æ£€æŸ¥èŠå¤©è®°å½•æ˜¯å¦æ­£ç¡®æ˜¾ç¤º</li>
                            <li>æµ‹è¯•å‘é€æ–°æ¶ˆæ¯åŠŸèƒ½</li>
                            <li>éªŒè¯æ¶ˆæ¯æ—¶é—´æ ¼å¼åŒ–</li>
                            <li>æ£€æŸ¥ç”¨æˆ·å¤´åƒå’Œåç§°æ˜¾ç¤º</li>
                        </ul>
                    </li>
                    <li><strong>APIé›†æˆæµ‹è¯•</strong>ï¼šæ£€æŸ¥Mockæ•°æ®æ˜¯å¦æ­£ç¡®è¿”å›</li>
                </ol>
            </div>

            <div class="test-section">
                <h3>ğŸ“Š æµ‹è¯•ç»“æœè®°å½•</h3>
                <div id="test-results">
                    <div class="test-result info">
                        <strong>å‡†å¤‡å°±ç»ª</strong>ï¼šç‚¹å‡»ä¸‹é¢çš„æŒ‰é’®å¼€å§‹æµ‹è¯•
                    </div>
                </div>
                <button onclick="runTests()" style="background: #28a745; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; margin-top: 10px;">
                    ğŸš€ å¼€å§‹æµ‹è¯•
                </button>
            </div>

            <div class="test-section">
                <h3>âœ… å·²å®ç°åŠŸèƒ½</h3>
                <ul class="feature-list">
                    <li>æ´»åŠ¨è¯¦æƒ…é¡µèŠå¤©å®¤æŒ‰é’®æ˜¾ç¤ºé€»è¾‘ï¼ˆä»…å‚ä¸è€…å¯è§ï¼‰</li>
                    <li>èŠå¤©å®¤é¡µé¢è·¯ç”±é…ç½®ï¼ˆ/chat/:activityIdï¼‰</li>
                    <li>èŠå¤©è®°å½•åŠ è½½å’Œæ˜¾ç¤ºåŠŸèƒ½</li>
                    <li>æ¶ˆæ¯å‘é€åŠŸèƒ½ï¼ˆæ”¯æŒAPIè°ƒç”¨å’Œæœ¬åœ°æ¨¡æ‹Ÿï¼‰</li>
                    <li>æ—¶é—´æ ¼å¼åŒ–æ˜¾ç¤º</li>
                    <li>ç”¨æˆ·å¤´åƒå’Œåç§°æ˜¾ç¤º</li>
                    <li>æ¶ˆæ¯å‘é€è€…æ ·å¼åŒºåˆ†</li>
                    <li>Mockæ•°æ®é›†æˆï¼ˆå…¨å±€æ•°æ®ç®¡ç†å™¨ï¼‰</li>
                    <li>è·¯ç”±è·³è½¬ä¿®å¤ï¼ˆç§»é™¤å¤šä½™çš„activityè·¯å¾„ï¼‰</li>
                </ul>
            </div>

            <div class="test-section">
                <h3>ğŸ”§ æŠ€æœ¯å®ç°</h3>
                <ul>
                    <li><strong>å‰ç«¯æ¡†æ¶</strong>ï¼šVue 3 + Vite</li>
                    <li><strong>UIç»„ä»¶</strong>ï¼šVant 4</li>
                    <li><strong>è·¯ç”±ç®¡ç†</strong>ï¼šVue Router</li>
                    <li><strong>æ•°æ®æ¨¡æ‹Ÿ</strong>ï¼šMock.js + å…¨å±€æ•°æ®ç®¡ç†å™¨</li>
                    <li><strong>çŠ¶æ€ç®¡ç†</strong>ï¼šPinia</li>
                </ul>
            </div>
        </div>
    </div>

    <script>
        // æ£€æŸ¥å¼€å‘æœåŠ¡å™¨çŠ¶æ€
        async function checkEnvironment() {
            const statusDiv = document.getElementById('environment-status');
            try {
                const response = await fetch('http://localhost:5173', { method: 'HEAD' });
                if (response.ok) {
                    statusDiv.innerHTML = '<div class="test-result success"><span class="status-indicator status-ok"></span>å¼€å‘æœåŠ¡å™¨è¿è¡Œæ­£å¸¸ âœ…</div>';
                } else {
                    statusDiv.innerHTML = '<div class="test-result error"><span class="status-indicator status-error"></span>å¼€å‘æœåŠ¡å™¨å“åº”å¼‚å¸¸ âŒ</div>';
                }
            } catch (error) {
                statusDiv.innerHTML = '<div class="test-result error"><span class="status-indicator status-error"></span>æ— æ³•è¿æ¥åˆ°å¼€å‘æœåŠ¡å™¨ âŒ<br>è¯·ç¡®ä¿è¿è¡Œ npm run dev</div>';
            }
        }

        // è¿è¡Œæµ‹è¯•
        async function runTests() {
            const resultsDiv = document.getElementById('test-results');
            resultsDiv.innerHTML = '<div class="test-result info">ğŸ”„ æ­£åœ¨è¿è¡Œæµ‹è¯•...</div>';

            const tests = [
                {
                    name: 'å¼€å‘æœåŠ¡å™¨è¿æ¥',
                    test: async () => {
                        const response = await fetch('http://localhost:5173', { method: 'HEAD' });
                        return response.ok;
                    }
                },
                {
                    name: 'æ´»åŠ¨è¯¦æƒ…é¡µåŠ è½½',
                    test: async () => {
                        const response = await fetch('http://localhost:5173/activity/1');
                        return response.ok;
                    }
                },
                {
                    name: 'èŠå¤©å®¤é¡µé¢åŠ è½½',
                    test: async () => {
                        const response = await fetch('http://localhost:5173/chat/1');
                        return response.ok;
                    }
                },
                {
                    name: 'æ¶ˆæ¯é¡µé¢åŠ è½½',
                    test: async () => {
                        const response = await fetch('http://localhost:5173/messages');
                        return response.ok;
                    }
                }
            ];

            let results = [];
            for (const test of tests) {
                try {
                    const passed = await test.test();
                    results.push({ name: test.name, passed });
                } catch (error) {
                    results.push({ name: test.name, passed: false, error: error.message });
                }
            }

            // æ˜¾ç¤ºæµ‹è¯•ç»“æœ
            let html = '';
            results.forEach(result => {
                const className = result.passed ? 'success' : 'error';
                const indicator = result.passed ? 'status-ok' : 'status-error';
                const icon = result.passed ? 'âœ…' : 'âŒ';
                html += `<div class="test-result ${className}">
                    <span class="status-indicator ${indicator}"></span>
                    ${icon} ${result.name}: ${result.passed ? 'é€šè¿‡' : 'å¤±è´¥'}
                    ${result.error ? `<br><small>é”™è¯¯: ${result.error}</small>` : ''}
                </div>`;
            });

            const passedCount = results.filter(r => r.passed).length;
            const totalCount = results.length;
            
            html += `<div class="test-result info">
                <strong>æµ‹è¯•å®Œæˆ</strong>ï¼š${passedCount}/${totalCount} é¡¹æµ‹è¯•é€šè¿‡
            </div>`;

            resultsDiv.innerHTML = html;
        }

        // é¡µé¢åŠ è½½æ—¶æ£€æŸ¥ç¯å¢ƒ
        window.addEventListener('load', checkEnvironment);

        // æ¯30ç§’è‡ªåŠ¨æ£€æŸ¥ä¸€æ¬¡ç¯å¢ƒçŠ¶æ€
        setInterval(checkEnvironment, 30000);
    </script>
</body>
</html>