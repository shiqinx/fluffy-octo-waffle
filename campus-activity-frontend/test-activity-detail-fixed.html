<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ´»åŠ¨è¯¦æƒ…é¡µé¢æµ‹è¯•</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 20px;
            background: #f5f5f5;
        }
        .container {
            max-width: 400px;
            margin: 0 auto;
            background: white;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .header {
            text-align: center;
            margin-bottom: 30px;
            color: #333;
        }
        .test-button {
            width: 100%;
            background: #1976d2;
            color: white;
            border: none;
            padding: 12px;
            border-radius: 6px;
            cursor: pointer;
            margin: 10px 0;
            font-size: 16px;
            font-weight: 500;
        }
        .test-button:hover {
            background: #1565c0;
        }
        .test-button.success {
            background: #4caf50;
        }
        .test-button.success:hover {
            background: #45a049;
        }
        .test-button.warning {
            background: #ff9800;
        }
        .test-button.warning:hover {
            background: #f57c00;
        }
        .result {
            margin-top: 20px;
            padding: 15px;
            border-radius: 4px;
            font-family: monospace;
            font-size: 12px;
            white-space: pre-wrap;
        }
        .result.success {
            background: #e8f5e8;
            border: 1px solid #4caf50;
            color: #2e7d32;
        }
        .result.error {
            background: #ffebee;
            border: 1px solid #f44336;
            color: #c62828;
        }
        .result.info {
            background: #e3f2fd;
            border: 1px solid #1976d2;
            color: #1565c0;
        }
        .route-info {
            background: #f5f5f5;
            padding: 15px;
            border-radius: 4px;
            margin: 15px 0;
            font-size: 14px;
        }
        .route-info code {
            background: #fff;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: monospace;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ¯ æ´»åŠ¨è¯¦æƒ…é¡µé¢æµ‹è¯•</h1>
            <p>æµ‹è¯•è·¯ç”±ä¿®å¤åçš„æ´»åŠ¨è¯¦æƒ…é¡µé¢æ˜¾ç¤º</p>
        </div>

        <div class="route-info">
            <strong>ğŸ“‹ è·¯ç”±ä¿¡æ¯ï¼š</strong><br>
            æ­£ç¡®è·¯å¾„: <code>/activities/:id</code><br>
            é”™è¯¯è·¯å¾„: <code>/activity/:id</code><br>
            ä¿®å¤çŠ¶æ€: âœ… å·²ä¿®å¤æ‰€æœ‰ç›¸å…³æ–‡ä»¶
        </div>

        <button class="test-button" onclick="testActivityDetail(1)">
            æµ‹è¯•æ´»åŠ¨è¯¦æƒ… - ç¯®çƒå‹è°Šèµ› (ID: 1)
        </button>
        
        <button class="test-button" onclick="testActivityDetail(2)">
            æµ‹è¯•æ´»åŠ¨è¯¦æƒ… - ä¸­åŒ»å…»ç”Ÿè®²åº§ (ID: 2)
        </button>
        
        <button class="test-button" onclick="testActivityDetail(3)">
            æµ‹è¯•æ´»åŠ¨è¯¦æƒ… - æ‘„å½±ä½œå“å±•è§ˆ (ID: 3)
        </button>
        
        <button class="test-button success" onclick="testActivityDetail(999)">
            æµ‹è¯•é»˜è®¤æ´»åŠ¨ (ID: 999)
        </button>

        <button class="test-button warning" onclick="testWrongRoute()">
            æµ‹è¯•é”™è¯¯è·¯ç”± (åº”è¯¥404)
        </button>

        <div id="testResult"></div>
    </div>

    <script>
        function testActivityDetail(activityId) {
            const resultDiv = document.getElementById('testResult');
            const correctUrl = `/activities/${activityId}`;
            const wrongUrl = `/activity/${activityId}`;
            
            resultDiv.className = 'result info';
            resultDiv.innerHTML = `
ğŸ§ª æµ‹è¯•æ´»åŠ¨è¯¦æƒ…é¡µé¢
========================

æ´»åŠ¨ID: ${activityId}
æ­£ç¡®è·¯ç”±: ${correctUrl}
é”™è¯¯è·¯ç”±: ${wrongUrl}

ğŸ“ ä¿®å¤è¯´æ˜ï¼š
âœ… è·¯ç”±é…ç½®ä½¿ç”¨ /activities/:id
âœ… æ‰€æœ‰ç»„ä»¶å·²ä¿®å¤ä¸º /activities/ è·¯å¾„
âœ… ActivityDetail.vue åŒ…å«å®Œæ•´çš„å›é€€æ•°æ®

ğŸ“‹ ä¿®å¤çš„æ–‡ä»¶ï¼š
- MyActivities.vue: navigateToActivity
- MyActivitiesView.vue: goToActivityDetail  
- ActivityView.vue: goToActivityDetail
- MessageView.vue: activityæ¶ˆæ¯è·³è½¬
- MyActivities.vue: navigateToCreateActivity
- MapView.vue: createActivity

ğŸ¯ æµ‹è¯•æ–¹æ³•ï¼š
1. åœ¨Vueåº”ç”¨ä¸­ç‚¹å‡»æ´»åŠ¨å¡ç‰‡
2. åº”è¯¥è·³è½¬åˆ° ${correctUrl}
3. é¡µé¢åº”æ˜¾ç¤ºæ´»åŠ¨è¯¦ç»†ä¿¡æ¯
4. å¦‚æœAPIå¤±è´¥ï¼Œä¼šæ˜¾ç¤ºæ¨¡æ‹Ÿæ•°æ®

ğŸ’¡ æ¨¡æ‹Ÿæ•°æ®åŒ…å«ï¼š
- ç¯®çƒå‹è°Šèµ› (ID: 1)
- ä¸­åŒ»å…»ç”Ÿè®²åº§ (ID: 2)  
- æ‘„å½±ä½œå“å±•è§ˆ (ID: 3)
- é»˜è®¤æ´»åŠ¨ (å…¶ä»–ID)

ç°åœ¨è¯·åœ¨Vueåº”ç”¨ä¸­æµ‹è¯•å®é™…è·³è½¬ï¼
            `;
            
            // å°è¯•åœ¨æ–°çª—å£ä¸­æ‰“å¼€æ­£ç¡®è·¯å¾„
            setTimeout(() => {
                const testWindow = window.open(correctUrl, '_blank');
                if (!testWindow) {
                    resultDiv.innerHTML += '\n\nâš ï¸ æ— æ³•è‡ªåŠ¨æ‰“å¼€æ–°çª—å£ï¼Œè¯·æ‰‹åŠ¨ç‚¹å‡»åº”ç”¨ä¸­çš„æ´»åŠ¨é“¾æ¥æµ‹è¯•';
                }
            }, 1000);
        }

        function testWrongRoute() {
            const resultDiv = document.getElementById('testResult');
            const wrongUrl = '/activity/123';
            
            resultDiv.className = 'result error';
            resultDiv.innerHTML = `
âŒ æµ‹è¯•é”™è¯¯è·¯ç”±
==================

é”™è¯¯è·¯å¾„: ${wrongUrl}
é¢„æœŸç»“æœ: 404 é¡µé¢ä¸å­˜åœ¨

è¿™è¯æ˜äº†è·¯ç”±ä¿®å¤çš„å¿…è¦æ€§ï¼š
- æ—§è·¯å¾„: /activity/:id âŒ
- æ–°è·¯å¾„: /activities/:id âœ…

æ‰€æœ‰ç»„ä»¶ç°åœ¨éƒ½ä½¿ç”¨æ­£ç¡®çš„è·¯å¾„ï¼
            `;
            
            // æµ‹è¯•é”™è¯¯è·¯å¾„
            setTimeout(() => {
                const testWindow = window.open(wrongUrl, '_blank');
                if (!testWindow) {
                    resultDiv.innerHTML += '\n\nâš ï¸ æ— æ³•è‡ªåŠ¨æ‰“å¼€æ–°çª—å£';
                }
            }, 1000);
        }

        // é¡µé¢åŠ è½½æ—¶æ˜¾ç¤ºå½“å‰ç¯å¢ƒä¿¡æ¯
        window.onload = function() {
            console.log('ğŸ¯ æ´»åŠ¨è¯¦æƒ…é¡µé¢æµ‹è¯•å·²åŠ è½½');
            console.log('ğŸŒ å½“å‰URL:', window.location.href);
            console.log('ğŸ“± ç«¯å£:', window.location.port);
            
            if (window.location.port === '3000' || window.location.port === '5173') {
                console.log('âœ… å¼€å‘æœåŠ¡å™¨ç¯å¢ƒæ­£å¸¸');
            } else {
                console.log('âš ï¸ è¯·åœ¨å¼€å‘æœåŠ¡å™¨ç¯å¢ƒä¸­è¿è¡Œæµ‹è¯•');
            }
        };
    </script>
</body>
</html>