# å‰ç«¯æµ‹è¯•è¯¦ç»†æŒ‡å—

## ğŸ§ª å‰ç«¯æµ‹è¯•ä½“ç³»æ¦‚è§ˆ

æ ¡å›­æ´»åŠ¨å¹³å°å‰ç«¯åŒ…å«å¤šç§æµ‹è¯•æ–¹å¼ï¼Œç¡®ä¿ä»£ç è´¨é‡å’ŒåŠŸèƒ½æ­£ç¡®æ€§ï¼š

### ğŸ“‹ æµ‹è¯•ç±»å‹åˆ†ç±»

1. **APIæ¥å£æµ‹è¯•** - éªŒè¯å‰åç«¯æ•°æ®äº¤äº’
2. **åŠŸèƒ½ç»„ä»¶æµ‹è¯•** - æµ‹è¯•UIç»„ä»¶åŠŸèƒ½
3. **ç”¨æˆ·äº¤äº’æµ‹è¯•** - éªŒè¯ç”¨æˆ·æ“ä½œæµç¨‹
4. **æ•°æ®æµæµ‹è¯•** - æµ‹è¯•çŠ¶æ€ç®¡ç†å’Œæ•°æ®ä¼ é€’
5. **å…¼å®¹æ€§æµ‹è¯•** - æµ‹è¯•ä¸åŒç¯å¢ƒä¸‹çš„è¡¨ç°

---

## ğŸš€ APIæ¥å£æµ‹è¯•

### 1. ä½¿ç”¨æµ‹è¯•é¡µé¢è¿›è¡ŒAPIæµ‹è¯•

é¡¹ç›®æä¾›äº†ä¸“é—¨çš„APIæµ‹è¯•é¡µé¢ï¼š

#### ğŸ”— åç«¯è¿æ¥æµ‹è¯•é¡µé¢
**è®¿é—®åœ°å€**: `http://localhost:3001/test-backend-connection.html`

**æµ‹è¯•åŠŸèƒ½**:
- åŸºç¡€è¿æ¥æµ‹è¯•
- è®¤è¯æ¥å£æµ‹è¯•
- å›¢é˜Ÿæ¥å£æµ‹è¯•
- æ´»åŠ¨æ¥å£æµ‹è¯•

**ä½¿ç”¨æ­¥éª¤**:
```javascript
// 1. æµ‹è¯•åŸºç¡€è¿æ¥
ç‚¹å‡»"æµ‹è¯•åç«¯è¿æ¥"æŒ‰é’®
// æ£€æŸ¥è¿”å›çŠ¶æ€å’Œå“åº”æ•°æ®

// 2. æµ‹è¯•è®¤è¯æ¥å£
ç‚¹å‡»"æµ‹è¯•è®¤è¯æ¥å£"æŒ‰é’®
// éªŒè¯ç”¨æˆ·è®¤è¯åŠŸèƒ½

// 3. æµ‹è¯•å…¶ä»–æ¥å£
ä¾æ¬¡æµ‹è¯•å›¢é˜Ÿå’Œæ´»åŠ¨æ¥å£
// ç¡®ä¿æ‰€æœ‰APIæ­£å¸¸å·¥ä½œ
```

#### ğŸ” è®¤è¯æ¥å£æµ‹è¯•
**è®¿é—®åœ°å€**: `http://localhost:3001/test-auth-api.html`

**æµ‹è¯•å†…å®¹**:
- ç”¨æˆ·ç™»å½•æ¥å£
- ç”¨æˆ·æ³¨å†Œæ¥å£
- å¯†ç ä¿®æ”¹æ¥å£
- Tokenåˆ·æ–°æœºåˆ¶

#### ğŸ¯ æ´»åŠ¨æ¥å£æµ‹è¯•
**è®¿é—®åœ°å€**: `http://localhost:3001/test-activity-api.html`

**æµ‹è¯•å†…å®¹**:
- æ´»åŠ¨åˆ—è¡¨è·å–
- æ´»åŠ¨è¯¦æƒ…æŸ¥è¯¢
- æ´»åŠ¨åˆ›å»ºåŠŸèƒ½
- æ´»åŠ¨æŠ¥ååŠŸèƒ½

#### ğŸ‘¥ å›¢é˜Ÿæ¥å£æµ‹è¯•
**è®¿é—®åœ°å€**: `http://localhost:3001/test-teams-api.html`

**æµ‹è¯•å†…å®¹**:
- å›¢é˜Ÿåˆ—è¡¨è·å–
- å›¢é˜Ÿåˆ›å»ºåŠŸèƒ½
- æˆå‘˜ç®¡ç†åŠŸèƒ½
- å›¢é˜Ÿæƒé™éªŒè¯

### 2. ä»£ç çº§åˆ«çš„APIæµ‹è¯•

åœ¨ `src/utils/apiTests.js` ä¸­åŒ…å«è‡ªåŠ¨åŒ–æµ‹è¯•ï¼š

```javascript
// APIæµ‹è¯•ç¤ºä¾‹
export async function testUserLogin() {
  try {
    const response = await userLogin({
      username: 'testuser',
      password: 'testpass'
    });
    
    console.log('âœ… ç™»å½•æµ‹è¯•æˆåŠŸ:', response);
    return { success: true, data: response };
  } catch (error) {
    console.error('âŒ ç™»å½•æµ‹è¯•å¤±è´¥:', error);
    return { success: false, error: error.message };
  }
}
```

---

## ğŸ¨ åŠŸèƒ½ç»„ä»¶æµ‹è¯•

### 1. ç»„ä»¶å•å…ƒæµ‹è¯•

ä½¿ç”¨Vue Test Utilsè¿›è¡Œç»„ä»¶æµ‹è¯•ï¼š

```javascript
// ç¤ºä¾‹ï¼šæµ‹è¯•ç™»å½•ç»„ä»¶
import { mount } from '@vue/test-utils'
import LoginView from '@/views/auth/LoginView.vue'

describe('LoginView', () => {
  it('åº”è¯¥æ­£ç¡®æ¸²æŸ“ç™»å½•è¡¨å•', () => {
    const wrapper = mount(LoginView)
    expect(wrapper.find('form').exists()).toBe(true)
    expect(wrapper.find('input[type="text"]').exists()).toBe(true)
    expect(wrapper.find('input[type="password"]').exists()).toBe(true)
  })
  
  it('åº”è¯¥æ­£ç¡®å¤„ç†ç™»å½•æäº¤', async () => {
    const wrapper = mount(LoginView)
    await wrapper.find('form').trigger('submit')
    // éªŒè¯APIè°ƒç”¨æ˜¯å¦æ­£ç¡®
  })
})
```

### 2. ç»„ä»¶äº¤äº’æµ‹è¯•

```javascript
// æµ‹è¯•ç”¨æˆ·äº¤äº’
it('åº”è¯¥æ­£ç¡®å¤„ç†ç”¨æˆ·è¾“å…¥', async () => {
  const wrapper = mount(LoginView)
  const usernameInput = wrapper.find('input[type="text"]')
  
  await usernameInput.setValue('testuser')
  expect(wrapper.vm.loginForm.username).toBe('testuser')
})
```

---

## ğŸ”„ æ•°æ®æµæµ‹è¯•

### 1. StoreçŠ¶æ€æµ‹è¯•

æµ‹è¯•PiniaçŠ¶æ€ç®¡ç†ï¼š

```javascript
import { createPinia } from 'pinia'
import { useAuthStore } from '@/stores/auth'

describe('Auth Store', () => {
  let pinia
  let authStore
  
  beforeEach(() => {
    pinia = createPinia()
    authStore = useAuthStore(pinia)
  })
  
  it('åº”è¯¥æ­£ç¡®è®¾ç½®ç”¨æˆ·ç™»å½•çŠ¶æ€', () => {
    authStore.setToken('test-token')
    expect(authStore.token).toBe('test-token')
    expect(authStore.isAuthenticated).toBe(true)
  })
})
```

### 2. APIå“åº”æ•°æ®æµ‹è¯•

```javascript
// æµ‹è¯•æ•°æ®è½¬æ¢
it('åº”è¯¥æ­£ç¡®è½¬æ¢APIå“åº”æ•°æ®', () => {
  const apiData = {
    id: 1,
    name: 'æµ‹è¯•æ´»åŠ¨',
    createTime: '2023-01-01T00:00:00Z'
  }
  
  const convertedData = convertActivityData(apiData)
  expect(convertedData.id).toBe(1)
  expect(convertedData.name).toBe('æµ‹è¯•æ´»åŠ¨')
  expect(convertedData.createTime).toBeInstanceOf(Date)
})
```

---

## ğŸ“± ç”¨æˆ·äº¤äº’æµ‹è¯•

### 1. é¡µé¢å¯¼èˆªæµ‹è¯•

```javascript
// æµ‹è¯•è·¯ç”±è·³è½¬
it('åº”è¯¥æ­£ç¡®è·³è½¬åˆ°æ´»åŠ¨è¯¦æƒ…é¡µ', async () => {
  const wrapper = mount(ActivityList)
  const activityItem = wrapper.find('.activity-item')
  
  await activityItem.trigger('click')
  expect(wrapper.vm.$route.path).toBe('/activity/1')
})
```

### 2. è¡¨å•éªŒè¯æµ‹è¯•

```javascript
// æµ‹è¯•è¡¨å•éªŒè¯
it('åº”è¯¥æ­£ç¡®éªŒè¯å¿…å¡«å­—æ®µ', async () => {
  const wrapper = mount(CreateActivity)
  const submitButton = wrapper.find('button[type="submit"]')
  
  await submitButton.trigger('click')
  expect(wrapper.find('.error-message').exists()).toBe(true)
})
```

---

## ğŸŒ å…¼å®¹æ€§æµ‹è¯•

### 1. æµè§ˆå™¨å…¼å®¹æ€§æµ‹è¯•

ä½¿ç”¨BrowserStackæˆ–ç±»ä¼¼å·¥å…·æµ‹è¯•ä¸åŒæµè§ˆå™¨ï¼š

- Chrome (æœ€æ–°ç‰ˆæœ¬)
- Firefox (æœ€æ–°ç‰ˆæœ¬)
- Safari (æœ€æ–°ç‰ˆæœ¬)
- Edge (æœ€æ–°ç‰ˆæœ¬)

### 2. å“åº”å¼è®¾è®¡æµ‹è¯•

æµ‹è¯•ä¸åŒå±å¹•å°ºå¯¸ï¼š

```javascript
// æµ‹è¯•å“åº”å¼å¸ƒå±€
describe('å“åº”å¼æµ‹è¯•', () => {
  it('åº”è¯¥åœ¨ç§»åŠ¨ç«¯æ­£ç¡®æ˜¾ç¤º', () => {
    // æ¨¡æ‹Ÿç§»åŠ¨ç«¯å±å¹•
    Object.defineProperty(window, 'innerWidth', {
      writable: true,
      configurable: true,
      value: 375,
    })
    
    const wrapper = mount(HomeView)
    expect(wrapper.find('.mobile-nav').exists()).toBe(true)
  })
})
```

---

## ğŸ”§ æµ‹è¯•å·¥å…·å’Œé…ç½®

### 1. æµ‹è¯•æ¡†æ¶é…ç½®

**Jesté…ç½®** (`jest.config.js`):
```javascript
module.exports = {
  testEnvironment: 'jsdom',
  moduleFileExtensions: ['js', 'json', 'vue'],
  transform: {
    '^.+\\.vue$': '@vue/vue3-jest',
    '.+\\.(css|styl|less|sass|scss|svg|png|jpg|ttf|woff|woff2)$': 'jest-transform-stub'
  },
  moduleNameMapping: {
    '^@/(.*)$': '<rootDir>/src/$1'
  }
}
```

### 2. æµ‹è¯•è„šæœ¬é…ç½®

**package.json**:
```json
{
  "scripts": {
    "test": "jest",
    "test:watch": "jest --watch",
    "test:coverage": "jest --coverage",
    "test:e2e": "cypress run",
    "test:e2e:open": "cypress open"
  }
}
```

---

## ğŸ“Š æµ‹è¯•æ‰§è¡Œæµç¨‹

### 1. è‡ªåŠ¨åŒ–æµ‹è¯•æµç¨‹

```bash
# 1. è¿è¡Œæ‰€æœ‰æµ‹è¯•
npm test

# 2. è¿è¡Œç‰¹å®šæµ‹è¯•
npm test -- --testNamePattern="ç™»å½•åŠŸèƒ½"

# 3. ç”Ÿæˆæµ‹è¯•è¦†ç›–ç‡æŠ¥å‘Š
npm run test:coverage

# 4. ç›‘è§†æ¨¡å¼è¿è¡Œæµ‹è¯•
npm run test:watch
```

### 2. æ‰‹åŠ¨æµ‹è¯•æµç¨‹

1. **å¯åŠ¨å¼€å‘æœåŠ¡å™¨**
   ```bash
   npm run dev
   ```

2. **è®¿é—®æµ‹è¯•é¡µé¢**
   - APIæµ‹è¯•: `http://localhost:3001/test-backend-connection.html`
   - åŠŸèƒ½æµ‹è¯•: `http://localhost:3001/test-auth-api.html`

3. **æ‰§è¡Œæµ‹è¯•ç”¨ä¾‹**
   - æŒ‰ç…§æµ‹è¯•é¡µé¢æŒ‡å¼•æ‰§è¡Œ
   - æ£€æŸ¥æµ‹è¯•ç»“æœå’Œæ—¥å¿—

4. **éªŒè¯æµ‹è¯•ç»“æœ**
   - æŸ¥çœ‹æ§åˆ¶å°æ—¥å¿—
   - æ£€æŸ¥ç½‘ç»œè¯·æ±‚
   - éªŒè¯é¡µé¢å“åº”

---

## ğŸ“‹ æµ‹è¯•æ£€æŸ¥æ¸…å•

### âœ… APIæµ‹è¯•æ£€æŸ¥é¡¹

- [ ] æ‰€æœ‰APIæ¥å£éƒ½èƒ½æ­£å¸¸è°ƒç”¨
- [ ] é”™è¯¯å¤„ç†æœºåˆ¶æ­£ç¡®å·¥ä½œ
- [ ] æ•°æ®æ ¼å¼éªŒè¯é€šè¿‡
- [ ] è®¤è¯æˆæƒæœºåˆ¶æ­£å¸¸
- [ ] è¶…æ—¶å’Œé‡è¯•æœºåˆ¶æœ‰æ•ˆ

### âœ… åŠŸèƒ½æµ‹è¯•æ£€æŸ¥é¡¹

- [ ] æ‰€æœ‰é¡µé¢æ­£å¸¸åŠ è½½
- [ ] ç”¨æˆ·äº¤äº’å“åº”æ­£ç¡®
- [ ] è¡¨å•éªŒè¯å·¥ä½œæ­£å¸¸
- [ ] é¡µé¢è·³è½¬åŠŸèƒ½æ­£å¸¸
- [ ] æ•°æ®å±•ç¤ºå‡†ç¡®æ— è¯¯

### âœ… å…¼å®¹æ€§æµ‹è¯•æ£€æŸ¥é¡¹

- [ ] ä¸»æµæµè§ˆå™¨å…¼å®¹æ€§
- [ ] ç§»åŠ¨ç«¯é€‚é…æ­£å¸¸
- [ ] ä¸åŒå±å¹•å°ºå¯¸é€‚é…
- [ ] ç½‘ç»œç¯å¢ƒé€‚åº”æ€§å¥½

---

## ğŸš¨ å¸¸è§æµ‹è¯•é—®é¢˜

### 1. APIæµ‹è¯•é—®é¢˜

**é—®é¢˜**: è¿æ¥è¶…æ—¶
```javascript
// è§£å†³æ–¹æ¡ˆï¼šå¢åŠ è¶…æ—¶æ—¶é—´
const response = await fetch(url, {
  timeout: 15000 // 15ç§’è¶…æ—¶
})
```

**é—®é¢˜**: CORSé”™è¯¯
```javascript
// è§£å†³æ–¹æ¡ˆï¼šé…ç½®ä»£ç†
// vite.config.js
export default {
  server: {
    proxy: {
      '/api': {
        target: 'http://localhost:8080',
        changeOrigin: true
      }
    }
  }
}
```

### 2. ç»„ä»¶æµ‹è¯•é—®é¢˜

**é—®é¢˜**: ç»„ä»¶æ¸²æŸ“å¤±è´¥
```javascript
// è§£å†³æ–¹æ¡ˆï¼šæä¾›å¿…è¦çš„ä¾èµ–
const wrapper = mount(MyComponent, {
  global: {
    plugins: [createPinia()],
    stubs: ['router-link', 'router-view']
  }
})
```

---

## ğŸ“ˆ æµ‹è¯•æŠ¥å‘Šå’Œåˆ†æ

### 1. ç”Ÿæˆæµ‹è¯•æŠ¥å‘Š

```bash
# ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
npm run test:coverage

# ç”Ÿæˆè¯¦ç»†æµ‹è¯•æŠ¥å‘Š
npm run test -- --verbose
```

### 2. æµ‹è¯•æŒ‡æ ‡åˆ†æ

- **ä»£ç è¦†ç›–ç‡**: ç›®æ ‡ > 80%
- **æµ‹è¯•é€šè¿‡ç‡**: ç›®æ ‡ 100%
- **APIæˆåŠŸç‡**: ç›®æ ‡ > 95%
- **ç”¨æˆ·ä½“éªŒè¯„åˆ†**: ç›®æ ‡ > 90%

---

## ğŸ¯ æµ‹è¯•æœ€ä½³å®è·µ

1. **æµ‹è¯•é©±åŠ¨å¼€å‘**: å…ˆå†™æµ‹è¯•ï¼Œå†å†™ä»£ç 
2. **æŒç»­é›†æˆ**: æ¯æ¬¡æäº¤éƒ½è¿è¡Œæµ‹è¯•
3. **æµ‹è¯•éš”ç¦»**: æ¯ä¸ªæµ‹è¯•ç”¨ä¾‹ç‹¬ç«‹è¿è¡Œ
4. **æ•°æ®æ¨¡æ‹Ÿ**: ä½¿ç”¨Mockæ•°æ®éš”ç¦»ä¾èµ–
5. **å®šæœŸé‡æ„**: ä¿æŒæµ‹è¯•ä»£ç è´¨é‡

é€šè¿‡è¿™å¥—å®Œæ•´çš„æµ‹è¯•ä½“ç³»ï¼Œç¡®ä¿æ ¡å›­æ´»åŠ¨å¹³å°å‰ç«¯çš„ç¨³å®šæ€§å’Œå¯é æ€§ï¼