<!DOCTYPE html>
<html>
<head>
    <title>æµ‹è¯•ç™»å½•</title>
</head>
<body>
    <h1>æµ‹è¯•ç™»å½•è„šæœ¬</h1>
    <button onclick="simulateLogin()">æ¨¡æ‹Ÿç™»å½•</button>
    <button onclick="checkAuth()">æ£€æŸ¥è®¤è¯çŠ¶æ€</button>
    <button onclick="goToChangePassword()">å»ä¿®æ”¹å¯†ç </button>
    
    <script>
        function simulateLogin() {
            // æ¨¡æ‹Ÿç™»å½•æ•°æ®
            const mockToken = 'mock-jwt-token-' + Date.now();
            const mockUser = {
                id: 1,
                studentId: '2021001',
                name: 'æµ‹è¯•ç”¨æˆ·',
                email: 'test@example.com'
            };
            
            // å­˜å‚¨åˆ°localStorage
            localStorage.setItem('token', mockToken);
            localStorage.setItem('user', JSON.stringify(mockUser));
            localStorage.setItem('loginTime', Date.now().toString());
            
            console.log('âœ… æ¨¡æ‹Ÿç™»å½•æˆåŠŸ');
            console.log('Token:', mockToken);
            console.log('User:', mockUser);
            alert('æ¨¡æ‹Ÿç™»å½•æˆåŠŸï¼');
        }
        
        function checkAuth() {
            const token = localStorage.getItem('token');
            const user = localStorage.getItem('user');
            const loginTime = localStorage.getItem('loginTime');
            
            console.log('ğŸ“Š è®¤è¯çŠ¶æ€æ£€æŸ¥:');
            console.log('Token:', token);
            console.log('User:', user);
            console.log('LoginTime:', loginTime);
            
            if (token && user && loginTime) {
                const currentTime = Date.now();
                const loginTimestamp = parseInt(loginTime);
                const fourHours = 4 * 60 * 60 * 1000;
                
                if (currentTime - loginTimestamp > fourHours) {
                    alert('Tokenå·²è¿‡æœŸ');
                } else {
                    alert('ç”¨æˆ·å·²ç™»å½•');
                }
            } else {
                alert('ç”¨æˆ·æœªç™»å½•');
            }
        }
        
        function goToChangePassword() {
            window.location.href = '/change-password';
        }
    </script>
</body>
</html>