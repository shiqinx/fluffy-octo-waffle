<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ´»åŠ¨åˆ›å»ºæµ‹è¯•é¡µé¢</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }
        .test-section {
            background: #f5f5f5;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
        }
        .btn {
            background: #1890ff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
        .btn:hover {
            background: #40a9ff;
        }
        .status {
            padding: 10px;
            margin: 10px 0;
            border-radius: 4px;
        }
        .success {
            background: #f6ffed;
            border: 1px solid #b7eb8f;
            color: #52c41a;
        }
        .error {
            background: #fff2f0;
            border: 1px solid #ffccc7;
            color: #ff4d4f;
        }
        .info {
            background: #e6f7ff;
            border: 1px solid #91d5ff;
            color: #1890ff;
        }
        pre {
            background: #f0f0f0;
            padding: 10px;
            border-radius: 4px;
            overflow-x: auto;
        }
    </style>
</head>
<body>
    <h1>ğŸ§ª æ´»åŠ¨åˆ›å»ºåŠŸèƒ½æµ‹è¯•é¡µé¢</h1>
    
    <div class="test-section">
        <h2>ğŸ“‹ æµ‹è¯•æ­¥éª¤</h2>
        <ol>
            <li>ç‚¹å‡»"æŸ¥çœ‹å½“å‰localStorageæ´»åŠ¨æ•°æ®"æŒ‰é’®ï¼ŒæŸ¥çœ‹ç°æœ‰æ´»åŠ¨</li>
            <li>åœ¨æ–°æ ‡ç­¾é¡µä¸­æ‰“å¼€ <a href="http://localhost:3001/activity/create" target="_blank">æ´»åŠ¨åˆ›å»ºé¡µé¢</a></li>
            <li>å¡«å†™æ´»åŠ¨ä¿¡æ¯å¹¶åˆ›å»ºæ–°æ´»åŠ¨</li>
            <li>åˆ›å»ºæˆåŠŸåï¼Œè¿”å›æ­¤é¡µé¢ç‚¹å‡»"æŸ¥çœ‹æ›´æ–°åçš„æ•°æ®"éªŒè¯æ–°æ´»åŠ¨æ˜¯å¦æ˜¾ç¤º</li>
            <li>è®¿é—® <a href="http://localhost:3001/activities" target="_blank">æ´»åŠ¨åˆ—è¡¨é¡µé¢</a> ç¡®è®¤æ–°æ´»åŠ¨æ˜¾ç¤º</li>
        </ol>
    </div>

    <div class="test-section">
        <h2>ğŸ”§ æµ‹è¯•å·¥å…·</h2>
        <button class="btn" onclick="viewCurrentActivities()">æŸ¥çœ‹å½“å‰localStorageæ´»åŠ¨æ•°æ®</button>
        <button class="btn" onclick="viewUpdatedActivities()">æŸ¥çœ‹æ›´æ–°åçš„æ•°æ®</button>
        <button class="btn" onclick="clearTestData()">æ¸…ç†æµ‹è¯•æ•°æ®</button>
        <button class="btn" onclick="resetToDefault()">é‡ç½®ä¸ºé»˜è®¤æ•°æ®</button>
    </div>

    <div id="status"></div>
    <div id="data-display"></div>

    <div class="test-section">
        <h2>ğŸ“ ä¿®å¤è¯´æ˜</h2>
        <div class="info">
            <strong>é—®é¢˜åŸå› ï¼š</strong>ActivityList.vueçš„loadDataå‡½æ•°æ¯æ¬¡éƒ½ä¼šå¼ºåˆ¶æ¸…ç†localStorageå¹¶é‡ç½®ä¸ºé»˜è®¤æ•°æ®ï¼Œå¯¼è‡´æ–°åˆ›å»ºçš„æ´»åŠ¨è¢«è¦†ç›–ã€‚
        </div>
        <div class="success">
            <strong>ä¿®å¤æ–¹æ¡ˆï¼š</strong>ä¿®æ”¹loadDataå‡½æ•°ï¼Œåªåœ¨localStorageä¸­æ²¡æœ‰æ´»åŠ¨æ•°æ®æ—¶æ‰åˆå§‹åŒ–é»˜è®¤æ•°æ®ï¼Œä¿ç•™ç”¨æˆ·åˆ›å»ºçš„æ´»åŠ¨ã€‚
        </div>
        <div class="info">
            <strong>é¢„æœŸæ•ˆæœï¼š</strong>æ–°åˆ›å»ºçš„æ´»åŠ¨åº”è¯¥èƒ½å¤Ÿæ­£å¸¸æ˜¾ç¤ºåœ¨æ´»åŠ¨åˆ—è¡¨ä¸­ï¼Œä¸ä¼šè¢«é»˜è®¤æ•°æ®è¦†ç›–ã€‚
        </div>
    </div>

    <script>
        function showStatus(message, type = 'info') {
            const statusDiv = document.getElementById('status');
            statusDiv.innerHTML = `<div class="status ${type}">${message}</div>`;
        }

        function displayData(data, title) {
            const displayDiv = document.getElementById('data-display');
            const activitiesCount = data ? data.length : 0;
            const activitiesHtml = data ? data.map(activity => 
                `<div style="border: 1px solid #ddd; padding: 10px; margin: 10px 0; border-radius: 4px;">
                    <strong>${activity.title}</strong> (ID: ${activity.id})<br>
                    ç±»å‹: ${activity.type || activity.category}<br>
                    åœ°ç‚¹: ${activity.locationName}<br>
                    æ—¶é—´: ${new Date(activity.startTime).toLocaleString()}<br>
                    å‚ä¸äººæ•°: ${activity.currentParticipants}/${activity.maxParticipants}
                </div>`
            ).join('') : '<p>æ²¡æœ‰æ´»åŠ¨æ•°æ®</p>';

            displayDiv.innerHTML = `
                <h3>${title} (å…±${activitiesCount}ä¸ªæ´»åŠ¨)</h3>
                ${activitiesHtml}
            `;
        }

        function viewCurrentActivities() {
            try {
                const activities = JSON.parse(localStorage.getItem('campus_activities') || '[]');
                displayData(activities, 'å½“å‰localStorageä¸­çš„æ´»åŠ¨æ•°æ®');
                showStatus(`æˆåŠŸè¯»å–åˆ° ${activities.length} ä¸ªæ´»åŠ¨`, 'success');
            } catch (error) {
                showStatus(`è¯»å–æ•°æ®å¤±è´¥: ${error.message}`, 'error');
            }
        }

        function viewUpdatedActivities() {
            viewCurrentActivities(); // åŒä¸€ä¸ªå‡½æ•°ï¼Œåªæ˜¯æç¤ºä¸åŒ
            showStatus('æ•°æ®å·²æ›´æ–°ï¼Œè¯·æ£€æŸ¥æ–°åˆ›å»ºçš„æ´»åŠ¨æ˜¯å¦åœ¨åˆ—è¡¨ä¸­', 'info');
        }

        function clearTestData() {
            if (confirm('ç¡®å®šè¦æ¸…ç†æ‰€æœ‰æµ‹è¯•æ•°æ®å—ï¼Ÿè¿™å°†åˆ é™¤localStorageä¸­çš„æ‰€æœ‰æ´»åŠ¨æ•°æ®ã€‚')) {
                localStorage.removeItem('campus_activities');
                showStatus('æµ‹è¯•æ•°æ®å·²æ¸…ç†', 'success');
                displayData([], 'æ¸…ç†åçš„æ•°æ®');
            }
        }

        function resetToDefault() {
            if (confirm('ç¡®å®šè¦é‡ç½®ä¸ºé»˜è®¤æ•°æ®å—ï¼Ÿè¿™å°†è¦†ç›–å½“å‰æ‰€æœ‰æ´»åŠ¨æ•°æ®ã€‚')) {
                // è¿™é‡Œå¯ä»¥è°ƒç”¨åˆå§‹åŒ–é»˜è®¤æ•°æ®çš„é€»è¾‘
                clearTestData();
                showStatus('å·²æ¸…ç†æ•°æ®ï¼Œåˆ·æ–°æ´»åŠ¨åˆ—è¡¨é¡µé¢å°†è‡ªåŠ¨åˆå§‹åŒ–é»˜è®¤æ•°æ®', 'info');
            }
        }

        // é¡µé¢åŠ è½½æ—¶è‡ªåŠ¨æ˜¾ç¤ºå½“å‰æ•°æ®
        window.onload = function() {
            viewCurrentActivities();
        };
    </script>
</body>
</html>